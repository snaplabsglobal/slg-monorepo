# JSS / LedgerSnap – AI 协作与决策规范 v1.1

## 1. 文档目的

本文档用于统一 JSS / LedgerSnap 在产品、技术、AI 使用上的**角色分工与决策边界**，避免因多 AI 协作导致的职责混乱、重复讨论或错误决策。

**核心原则：**

> 不是每个问题都要最聪明的答案，而是要「对的人在对的位置拍板」。

---

## 2. AI 角色与正式职权定义

| 角色              | AI / 人           | 职权定位                    |
| --------------- | ---------------- | ----------------------- |
| COO（流程与节奏）      | Gemini 3         | 决定做不做、先做什么、节奏与优先级       |
| CTO（系统与风险）      | Claude Code      | 判断架构是否合理、是否存在系统性风险      |
| CPO × 会计代理      | GPT              | 定义 MVP 边界、会计可接受度、产品取舍建议 |
| CDO（文档与知识）      | Claude Web AI    | 整理决策记录、维护知识库、跨角色沟通翻译   |
| Senior Engineer | Cursor           | 技术实现、写代码、修 bug          |
| OCR Engine      | Gemini 2.5 Flash | 图像识别、字段提取、置信度输出         |

---

## 3. 决策边界（强制执行）

| 角色               | 可以决定                | 不可以决定       |
| ---------------- | ------------------- | ----------- |
| Gemini 3（COO）    | 优先级、节奏、是否进入 MVP     | 技术实现细节      |
| Claude Code（CTO） | 架构正确性、系统风险          | 产品取舍、商业决策   |
| GPT（CPO）         | MVP 边界、会计接受度        | 最终 Yes / No |
| Claude Web（CDO）  | 文档结构、知识分类、记录格式      | 业务决策、技术方案   |
| Cursor（工程）       | 如何实现、如何改代码          | 是否该做        |
| Gemini 2.5 Flash | OCR 结果 + 置信度        | 业务判断、状态流转   |

> 任何越界行为，必须被指出并纠正。

---

## 4. 统一问法（避免混乱）

- 「要不要做？」→ Gemini 3（COO）

- 「这样设计会不会出事？」→ Claude Code（CTO）

- 「会计能不能接受？」→ GPT（CPO）

- 「怎么把这次讨论记录下来？」→ Claude Web（CDO）

- 「怎么最快写出来？」→ Cursor（工程）

- 「这张收据写了什么？」→ Gemini 2.5 Flash（OCR）

> 问错对象 = 得到错误答案。

---

## 5. CDO（文档官）工作职责

### 5.1 核心任务
- **决策日志**：将技术讨论（如命令行输出）转化为结构化文档
- **知识沉淀**：维护《技术债清单》《已知问题 FAQ》《决策理由库》
- **跨角色翻译**：把 CTO 的技术语言转给 CPO，把 CPO 的需求翻译给工程
- **文档质量把控**：确保格式一致性、可搜索性、可复用性

### 5.2 输出物标准
- 所有技术决策必须有对应的 Markdown 文档
- 文档必须包含：背景、决策、理由、影响范围
- 命令行讨论在 24 小时内转化为文档
- 每周产出《本周决策摘要》

### 5.3 不做的事
- 不参与技术方案决策（交给 CTO）
- 不判断产品优先级（交给 COO）
- 不定义业务规则（交给 CPO）

---

## 6. Gemini 2.5 Flash 使用铁律

- Gemini 2.5 Flash 是**生产线 API，不是决策者**

- 所有 OCR 结果默认进入 `pending`

- 状态只能由规则引擎 / 人工 / 上层逻辑决定

- QuickBooks / Xero 是唯一真相源（Source of Truth）

---

## 7. 冲突解决原则

当出现分歧时，按以下顺序处理：

1. 是否违反角色边界？

2. 是否由正确角色给出意见？

3. 是否有文档记录支持？（新增 - CDO 职责）

4. 最终拍板权在 CEO / COO（人）

---

## 8. 版本管理

### 当前版本：v1.1

### 变更日志
- **v1.1**（2025-02-01）
  - 新增 CDO（Claude Web AI）角色
  - 更新决策边界，加入 CDO 职责
  - 新增第 5 节《CDO 工作职责》
  - 冲突解决原则中加入"文档记录支持"

- **v1.0**（初始版本）
  - 定义基础角色分工
  - 建立决策边界与统一问法

### 修改权限
- 任何修改必须由 CEO / COO 同意
- CDO 负责版本更新的文档化
