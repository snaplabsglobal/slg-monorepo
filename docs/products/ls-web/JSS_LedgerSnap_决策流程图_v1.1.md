# JSS / LedgerSnap – 决策流程图 v1.1（文字版）

## 一、总体决策流程

```
【问题 / 需求 / Bug 出现】
        ↓
【GPT（CPO × 会计代理）】
- 拆业务目标
- 拆会计风险
- 定 MVP 边界
        ↓
【Gemini 3（COO）】
- 是否要做？
- 现在做还是以后？
- 优先级排序
        ↓
【Claude Code（CTO）】
- 架构是否合理？
- 是否存在系统性风险？
        ↓
【GPT】
- 收敛为"可执行方案"
        ↓
【Cursor（工程）】
- 写代码
- 修 bug
- 实现方案
        ↓
【GPT / 人工验收】
- 是否符合产品预期？
- 是否满足会计可用性？
        ↓
【Claude Web（CDO）】✨ 新增
- 整理决策记录
- 归档技术文档
- 更新知识库
```

---

## 二、快速分流规则（实战）

### 情况 A：AI 未自动触发 / 状态异常
- Claude Code（CTO）：检查触发链路与状态机
- Cursor：补日志、修实现
- GPT（CPO）：评估是否影响会计体验
- **Claude Web（CDO）：记录问题、解决方案、根因分析** ✨

### 情况 B：新功能建议
- GPT（CPO）：拆解 MVP 与会计影响
- Gemini 3（COO）：决定是否现在做
- Claude Code（CTO）：评估架构影响
- **Claude Web（CDO）：记录决策理由、产出需求文档** ✨

### 情况 C：OCR 识别不准
- Gemini 2.5 Flash：继续作为 OCR 工具
- 上层规则 / 人工：决定状态
- 禁止将业务判断下放给 OCR 模型
- **Claude Web（CDO）：记录识别失败案例、改进建议** ✨

### 情况 D：技术讨论在命令行 ✨ 新增
- Claude Code（CTO）：提供技术分析（命令行输出）
- **Claude Web（CDO）：24 小时内转化为 Markdown 文档**
- 文档存入知识库，供后续查询

---

## 三、CDO 在决策流中的定位 ✨ 新增

### 3.1 不阻断流程
- CDO **不参与**决策本身（不投票、不拍板）
- CDO 是"记录员 + 翻译员"，不是"决策者"

### 3.2 并行工作
- 当 COO / CTO / CPO 讨论时，CDO 同步记录
- 当 Cursor 写代码时，CDO 准备文档模板
- 验收完成后，CDO 立即归档

### 3.3 输出时机
| 决策阶段 | CDO 输出物 | 时效要求 |
|---------|-----------|---------|
| 需求讨论后 | 《需求背景与决策理由》 | 当天 |
| 技术方案后 | 《技术架构文档》 | 24 小时 |
| 实现完成后 | 《功能说明 + 已知问题》 | 当天 |
| Bug 修复后 | 《根因分析 + 预防措施》 | 当天 |

---

## 四、拍板规则（必须明确）

- Gemini 3（COO）提供优先级建议
- Claude Code（CTO）提供技术风险评估
- GPT（CPO）提供产品可行性建议
- **Claude Web（CDO）提供历史决策参考** ✨
- 最终 Yes / No 在 CEO / COO（人）
- AI 不拥有最终决策权

---

## 五、文档化强制要求 ✨ 新增

### 5.1 必须文档化的场景
- 所有架构变更
- 所有状态机逻辑修改
- 所有 API 接口变更
- 所有重大 Bug 修复

### 5.2 文档存放位置
- `/docs/decisions/` - 决策日志
- `/docs/architecture/` - 技术架构
- `/docs/troubleshooting/` - 问题排查
- `/docs/knowledge-base/` - 知识库

### 5.3 文档命名规范
```
YYYY-MM-DD_类型_简短描述.md

示例：
2025-02-01_决策_状态管理机制.md
2025-02-01_架构_409冲突避免方案.md
2025-02-01_问题_OCR识别失败案例.md
```

---

## 六、使用提醒

> 我们不是在让 AI 变聪明，  
> 而是在让决策更清楚、更可复制。
>
> **有了 CDO，决策不再丢失，知识可以复用。** ✨

---

## 版本管理

### 当前版本：v1.1

### 变更日志
- **v1.1**（2025-02-01）
  - 新增 CDO（Claude Web AI）在决策流中的位置
  - 新增"情况 D：技术讨论在命令行"分流规则
  - 新增第三节《CDO 在决策流中的定位》
  - 新增第五节《文档化强制要求》
  - 更新所有分流规则，加入 CDO 职责

- **v1.0**（初始版本）
  - 定义基础决策流程
  - 建立快速分流规则
