# PlanSnap 项目文档索引

> **最后更新：** 2026-02-03  
> **维护者：** CDO  
> **项目状态：** MVP (Sprint 2-3)

---

## 📚 文档组织结构

```
/outputs
  /products/plansnap/        # 产品设计文档
  /architecture/             # 架构规范文档
  /meetings/                 # 会议纪要
  /strategy/                 # 战略决策
  /code/                     # 代码示例和实现
  /decisions/                # 决策日志
```

---

## 🎯 快速导航

### 新成员入门（必读）

1. **项目交接文档** - 了解PlanSnap全貌  
   `2026-02-02_PlanSnap项目交接文档_给新CDO.md`

2. **产品设计蓝图** - 理解产品定位和设计哲学  
   `2026-02-02_PlanSnap_产品设计蓝图_CDO版.md`

3. **快速参考卡** - 5分钟速查  
   `2026-02-02_PlanSnap_快速参考卡.md`

---

### CTO技术实现（必读）

1. **单位系统技术规范** - 架构基石  
   `2026-02-02_单位系统技术规范_CTO执行版.md`

2. **CAD风格改进技术方案** - 专业体验关键  
   `2026-02-02_会议纪要_PlanSnap-CAD风格改进_CTO执行版.md`

3. **角度锁定系统** - 最新紧急修复 🔴  
   `2026-02-03_技术方案_角度锁定系统_CTO执行版.md`  
   `2026-02-03_代码_角度锁定最小修复补丁.md`  
   `2026-02-03_代码_完整computeFinalEnd实现.ts`

---

### CPO产品决策（参考）

1. **双产品线战略** - PlanSnap + IsoSnap  
   `2026-02-02_战略决策_PlanSnap-IsoSnap双产品线.md`

2. **决策日志** - 所有重大决策记录  
   `2026-02-03_PlanSnap_决策日志.md`

---

## 📋 文档清单（按日期）

### 2026-02-03（最新）

#### 会议纪要

| 文档名称             | 类型   | 优先级   | 状态    |
| ---------------- | ---- | ----- | ----- |
| UI清爽化减法设计        | 会议纪要 | 🟡 P1 | ✅ 已完成 |
| 标注系统精度和交互改进      | 会议纪要 | 🔴 P0 | ✅ 已完成 |
| Eraser和Trim工具设计  | 会议纪要 | 🔴 P0 | ✅ 已完成 |
| 画图手感升级_Tape和分数输入 | 会议纪要 | 🔴 P0 | ✅ 已完成 |
| 角度锁定问题诊断_紧急修复    | 会议纪要 | 🔴 P0 | ✅ 已完成 |

**最新：UI清爽化**

- 减法设计（5项改动）
- 角度显示只保留30/45/60
- 删除Angle和DIM Toolbar
- 尺寸显示简化（简化分数）
- Grid颜色调整

---

#### 技术文档

| 文档名称                | 类型   | 工作量  | 状态    |
| ------------------- | ---- | ---- | ----- |
| UI清爽化_快速清单          | 速查卡  | -    | ⏳ 待执行 |
| 标注系统改进_快速清单         | 速查卡  | -    | ⏳ 待执行 |
| Eraser和Trim_CTO执行版  | 技术方案 | 3-4天 | ⏳ 待执行 |
| Eraser和Trim_快速清单    | 速查卡  | -    | ⏳ 待执行 |
| Tape工具和分数输入_CTO执行版  | 技术方案 | 5天   | ⏳ 待执行 |
| Tape工具和分数输入_快速清单    | 速查卡  | -    | ⏳ 待执行 |
| 角度锁定最小修复补丁          | 实施指南 | 2小时  | ⏳ 待执行 |
| 完整computeFinalEnd实现 | 代码实现 | 4小时  | ⏳ 待执行 |

**UI清爽化内容：**

- 5项减法改动
- 角度显示filter
- Toolbar简化
- 分数简化算法
- Grid颜色调整
- 0.5-1天执行计划

---

#### UI/UX规范（新增）

| 文档名称            | 类型   | 工作量  | 状态    |
| --------------- | ---- | ---- | ----- |
| 角度锁定交互体验_CTO执行版 | UI规范 | 1.5天 | ⏳ 待执行 |
| 角度锁定交互体验_快速清单   | 速查卡  | -    | ⏳ 待执行 |

**关键内容：**

- 光标角度提示（最重要）
- 线条颜色变化
- Shift增强提示
- 完整文案规范
- CSS样式规范
- React组件实现

**设计原则：**

```
状态必须"说话"
文字 > 图标
短、硬、工程感
```

---

#### 决策文档

| 文档名称          | 类型   | 影响范围 | 状态      |
| ------------- | ---- | ---- | ------- |
| PlanSnap_决策日志 | 决策记录 | 全项目  | 🚧 持续更新 |

**已记录决策：**

- DEC-003: 角度锁定系统架构修正
- DEC-002: 角度集配置与22.5°处理
- DEC-001: 角度锁定优先级顺序
- DEC-000: 单位系统架构

---

### 2026-02-02（基础文档）

#### 产品设计

| 文档名称                 | 类型   | 页数  | 状态    |
| -------------------- | ---- | --- | ----- |
| PlanSnap_产品设计蓝图_CDO版 | 产品文档 | 30+ | ✅ 已完成 |
| PlanSnap_快速参考卡       | 速查卡  | 5   | ✅ 已完成 |

**关键内容：**

- 四条铁律
- Figma页面结构（11个页面）
- Line Drawing Flow（7个状态帧）
- 明确禁止清单

---

#### 技术方案

| 文档名称           | 类型   | 工作量 | 状态     |
| -------------- | ---- | --- | ------ |
| 角度锁定系统_CTO执行版  | 技术方案 | 4天  | ⚠️ 需修正 |
| 角度锁定系统_快速执行清单  | 速查卡  | -   | ⚠️ 需修正 |
| CAD风格改进_CTO执行版 | 技术方案 | 7天  | ✅ 已完成  |
| CAD风格改进_快速参考卡  | 速查卡  | -   | ✅ 已完成  |

**注意：**  
🚨 角度锁定系统文档需要修正（优先级矛盾问题），请参考最新版本

---

#### 架构规范

| 文档名称            | 类型   | 工作量  | 状态    |
| --------------- | ---- | ---- | ----- |
| 单位系统技术规范_CTO执行版 | 架构文档 | 2-3天 | ✅ 已完成 |
| 单位系统_快速执行清单     | 速查卡  | -    | ✅ 已完成 |

**关键内容：**

- 底层统一mm
- UI层切换英制/公制
- 单位宪法（6个任务）

---

#### 战略决策

| 文档名称                      | 类型   | 影响  | 状态    |
| ------------------------- | ---- | --- | ----- |
| 战略决策_PlanSnap-IsoSnap双产品线 | 战略文档 | 高   | ✅ 已确定 |

**关键决策：**

- PlanSnap + IsoSnap 独立产品
- 共享技术栈（Canvas/Storage/Export）
- 分离业务逻辑（工具栏/交互/角度限制）

---

## 🔍 按主题查找

### UI清爽化 - 减法设计（最新）

**文档（2026-02-03）：**

1. `2026-02-03_会议纪要_UI清爽化减法设计.md` - 会议纪要
2. `2026-02-03_UI清爽化_快速执行清单.md` - 快速执行

**核心决策：**

**CEO判断：**

> "底层已经对了，但UI噪音太大，正在'出卖手感'。这不是审美问题，而是专业绘图软件的'减法'阶段。"

**5项减法改动：**

**1. 角度显示：只保留30/45/60**

```
❌ 不显示：0°, 90°, 180°, 270° (正交角是默认常识)
✅ 只显示：30°, 45°, 60° (特殊角度需要反馈)
```

**2. 删除Angle Toolbar**

```
理由："用户不会在画图前先想'我要切到45°模式'"
保留底层能力（Smart Snap、Shift锁定）
```

**3. 删除DIM Toolbar（阶段性）**

```
理由："线画出来 = 就应该知道它多长"
替代：线的长度自动显示
```

**4. 尺寸显示：干净、真实、克制**

```
原则：显示精度永远 ≤ snap精度
简化分数：2/16 → 1/8, 4/16 → 1/4
不显示：0/16, 多余精度, 计算残差
```

**5. Grid颜色：+10-15%**

```
主Grid：不透明度提升
目标：可见但不抢线
```

**设计理念：**

```
参考SketchUp："没有Angle面板，但角度永远在那"
信息显示优先级：P0必须 > P1可选 > P2不显示
```

**执行计划：** 0.5-1天

---

### 标注系统改进（紧急）

**文档（2026-02-03）：**

1. `2026-02-03_会议纪要_标注系统精度和交互改进.md` - 会议纪要
2. `2026-02-03_标注系统改进_快速执行清单.md` - 快速执行

**核心问题：**

**问题1：精度丢失**

```
36-1/4" 显示成 3'（分数丢失）
根因：四舍五入 或 数据来源错误
```

**问题2：交互简陋**

```
不能选择方向（上/下/左/右）
不能拖动偏移距离
```

**解决方案：**

**精度修复：**

```
1. 确保从world坐标计算
2. 添加精度设置（1/2", 1/4", 1/8", 1/16"）
3. 正确的格式化函数
4. 默认1/16"精度
```

**交互改进：**

```
1. 三段式：Pick A → Pick B → Place
2. 鼠标移动选择方向
3. 可拖动偏移
4. 可输入偏移值
```

**Jira Epic：**

```
P0-401: 标注精度修复（紧急）
P0-402: 显示精度设置
P0-403: 三段式交互
P0-404: 拖动偏移
P0-405: 输入偏移值
P1-406: 翻转和锁定（可选）
```

**执行计划：** 2-3天

**关键规则：**

```
标注值永远来自：世界坐标真实距离（mm）
仅在UI层格式化成英制/公制
不从像素、grid、显示文本反算
```

---

### Eraser/Trim 工具（最新）

**文档（2026-02-03）：**

1. `2026-02-03_会议纪要_Eraser和Trim工具设计.md` - 会议纪要
2. `2026-02-03_技术方案_Eraser和Trim_CTO执行版.md` - 完整技术方案
3. `2026-02-03_Eraser和Trim_快速执行清单.md` - 快速执行

**核心内容：**

**三层设计：**

```
第一层：画线相交不自动切断（安全）
第二层：橡皮工具E（明确删除）
第三层：Smart Trim（智能切段）
```

**关键原则：**

```
画线 = 增加
橡皮 = 删除
拆段发生在"删除时"，不是"画线时"
```

**自动/不自动拆段白名单：**

```
❌ 永不自动拆：画线相交、guide穿过墙线
✅ 只在删除时拆：E删除、Trim工具
❌ 永不拆对象：Guide、Dimension、Locked
```

**Jira Epic：**

```
P0-301: Eraser工具基础
P0-302: Hover高亮
P0-303: Intersection计算与拆分
P0-304: Smart Trim
P0-305: Guide删除规则
P1-306: Trim Tool（未来）
```

**执行计划：** 3-4天（详见技术方案）

**产品意义：**

> "这一步直接把 PlanSnap 从'画图工具'推进到'施工级编辑器'。"

---

### Tape工具和分数输入（最新优先级）

**文档（2026-02-03）：**

1. `2026-02-03_会议纪要_画图手感升级_Tape和分数输入.md` - 会议纪要
2. `2026-02-03_技术方案_Tape工具和分数输入_CTO执行版.md` - 完整技术方案
3. `2026-02-03_Tape工具和分数输入_快速执行清单.md` - 快速执行

**核心内容：**

**A. Tape Offset Guides**

```
SketchUp式平行辅助线工具
任意点锁定参照
拖拽生成平行虚线（无限延伸）
输入距离（支持分数）
```

**B. Fraction Input**

```
支持 12 1/8 英制分数
Typing时Space = 分隔符（不是Esc）
Esc只清buffer，不退出工具
```

**Jira Epic：**

```
P0-101~105: Tape工具（5个tickets）
P0-201~203: 分数输入（3个tickets）
```

**执行计划：** 5天（详见技术方案）

---

### 角度锁定系统

**最新文档（2026-02-03）：**

**架构修复：**

1. `2026-02-03_会议纪要_角度锁定问题诊断_紧急修复.md` - 问题分析
2. `2026-02-03_代码_角度锁定最小修复补丁.md` - 立即执行
3. `2026-02-03_代码_完整computeFinalEnd实现.ts` - 长期方案

**UI/UX规范：**
4. `2026-02-03_UI规范_角度锁定交互体验_CTO执行版.md` - 完整UI/UX规范
5. `2026-02-03_UI规范_角度锁定交互体验_快速清单.md` - 快速执行

**原始文档（需修正）：**

1. `2026-02-03_技术方案_角度锁定系统_CTO执行版.md`
2. `2026-02-03_角度锁定系统_快速执行清单.md`

**关键决策：**

- 优先级：Typed > Explicit > Shift > Inference > Smart > Free
- Shift必须纯正交（0/90/180/270）
- 22.5°不默认（仅Advanced模式）

**UI/UX原则：**

- 状态必须"说话" - 不靠感觉，不靠教程
- 文字 > 图标
- 短、硬、工程感

---

### 单位系统

**文档：**

1. `2026-02-02_单位系统技术规范_CTO执行版.md`
2. `2026-02-02_单位系统_快速执行清单.md`

**关键决策：**

- 底层统一mm
- UI层切换英制/公制
- Grid ≠ 几何约束

---

### CAD风格改进

**文档：**

1. `2026-02-02_会议纪要_PlanSnap-CAD风格改进_CTO执行版.md`
2. `2026-02-02_CAD风格改进_快速参考卡.md`

**三大改进：**

1. 线宽系统（1px细线）
2. Inference Engine（SketchUp式推断）
3. 键盘数字输入（拉线时输入"9'6"）

---

### 产品边界

**文档：**

1. `2026-02-02_PlanSnap_产品设计蓝图_CDO版.md`
2. `2026-02-02_PlanSnap项目交接文档_给新CDO.md`

**核心原则：**

```
✅ PlanSnap只做：2D、比例、网格、快速layout
❌ PlanSnap不做：Isometric、管道、Code检查、智能识别
```

---

## 📊 文档状态统计

### 按状态

- ✅ 已完成：13 份
- ⚠️ 需修正：2 份
- ⏳ 待执行：10 份
- 🚧 持续更新：1 份

---

### 按优先级

- 🔴 P0 (Critical)：10 份
- 🟡 P1 (Important)：5 份
- 🟢 P2 (Nice to have)：0 份

---

### 按类型

- 产品文档：2 份
- 技术方案：10 份
- 架构规范：2 份
- UI/UX规范：3 份
- 会议纪要：6 份
- 决策记录：1 份
- 代码实现：1 份

---

## 🎯 下一步待创建文档

### 紧急（本周）

- [ ] `2026-02-03_技术方案_角度锁定系统_v1.1.md` - 修正版
- [ ] `2026-02-03_角度锁定系统_快速执行清单_v1.1.md` - 修正版

---

### 重要（2周内）

- [ ] Figma设计规范文档
- [ ] iPad手势规范文档
- [ ] 用户手册（给SketchUp用户）
- [ ] Beta测试计划

---

### 长期（1个月内）

- [ ] API文档
- [ ] 性能优化指南
- [ ] 测试用例库
- [ ] 技术债务追踪

---

## 🔄 文档维护规范

### 命名规范

```
YYYY-MM-DD_类型_标题_版本.md

例如：
2026-02-03_产品决策_Grid系统优化_v1.0.md
2026-02-03_技术方案_Snap精度提升_CTO版.md
2026-02-03_会议纪要_设计评审_Sprint2.md
```

---

### 版本控制

- **v1.0** - 初始版本
- **v1.1** - 小幅修正
- **v2.0** - 重大修订
- **_CTO版** - 给特定角色的版本

---

### 更新频率

- **会议纪要** - 会议后24小时内
- **技术方案** - 决策确定后立即创建
- **决策日志** - 每次重大决策后立即更新
- **文档索引** - 每周更新一次

---

### Review流程

1. **CDO创建** - 初稿
2. **相关人Review** - CPO/CTO确认
3. **CDO发布** - 正式版本
4. **定期回顾** - 每月检查更新

---

## 📞 联系方式

**文档相关问题：**

- 联系：CDO
- 方式：通过对话框讨论

**技术问题：**

- 联系：CTO
- 参考：相关技术文档

**产品问题：**

- 联系：CPO
- 参考：产品设计文档

---

## 🎓 使用建议

### 新成员

1. 先读项目交接文档
2. 再读产品设计蓝图
3. 最后读相关技术方案

---

### CTO

1. 优先读"CTO执行版"文档
2. 配合"快速执行清单"使用
3. 遇到问题参考决策日志

---

### CPO

1. 关注产品文档和决策日志
2. 验收时参考技术方案的验收标准
3. 产品调整时先更新决策日志

---

**最后更新：** 2026-02-03  
**下次更新：** 2026-02-10  
**维护者：** CDO
