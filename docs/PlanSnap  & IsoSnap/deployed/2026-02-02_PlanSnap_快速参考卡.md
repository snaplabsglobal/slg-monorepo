# PlanSnap 快速参考卡

> **快速参考：** PlanSnap 核心原则和关键规范  
> **受众：** 设计师 / CTO / 全团队  
> **版本：** v1.0  
> **日期：** 2026-02-02

---

## 🎯 一句话定位

> **按比例、基于网格、用"线"画的 2D Floor Plan 工具**  
> **服务真实施工沟通，不是营销展示**

---

## 🚫 PlanSnap 不是

```
❌ CAD
❌ SketchUp
❌ 图片拼装工具
❌ 自动生成工具
```

---

## 📐 四条铁律（必须同时满足）

1. **线优先** - 墙、房间都由线构成
2. **网格磁力优先** - 不靠智能猜测
3. **比例真实** - 所画即所量
4. **快于 CAD** - 10 分钟出图

---

## ⌨️ 核心快捷键

| 键       | 功能     |
| ------- | ------ |
| **L**   | 画线（连续） |
| **H**   | 移动画布   |
| **D**   | 尺寸标注   |
| **T**   | 辅助线    |
| **Esc** | 回到选择   |

---

## 📐 Line Drawing（7个状态帧）

```
0. Idle → 1. Tool Armed → 2. Hover Snap
→ 3. First Click → 4. Drag Preview
→ 5. Second Click → 6. Continue
→ 7. Cancel/Undo
```

**关键：**

- 起点必须是 snap 点
- 只能画水平/垂直
- 画完不退出，可继续
- 终点在已有 node → 合并

---

## 🎨 Figma 页面结构（11页）

| 页面               | 优先级   | 说明       |
| ---------------- | ----- | -------- |
| 0. Design System | 🔴 P0 | 先做！共用语言  |
| 1. App Shell     | 🔴 P0 | 整体框架     |
| 2. Tool Bar      | 🔴 P0 | 左侧工具栏    |
| 3. Line Drawing  | 🔴 P0 | 最重要！7状态帧 |
| 4. Dimension     | 🟡 P1 | 标注工具     |
| 5. Grid & Snap   | 🟡 P1 | 吸附行为     |
| 6. Selection     | 🟡 P1 | 编辑能力     |
| 7. Export        | 🟡 P1 | 导出流程     |
| 8. iPad          | 🟢 P2 | iPad 适配  |
| 9. Mobile        | 🟢 P2 | 仅查看      |
| 10. NOT Doing    | 🟢 P2 | 团队对齐     |
| 11. Cheat Sheet  | 🟢 P2 | 快捷键      |

---

## 🧲 Grid & Snap

**Grid 尺寸：**

- 1 ft
- 6 in
- 1 in

**Snap 优先级：**

1. Grid
2. Endpoint
3. Midpoint
4. Intersection

---

## 📏 比例系统

```
默认：1/4" = 1'-0"
单位：Imperial (ft / in)
画布：无限

导出提示：
"Current drawing fits A4 @ 1:50"
```

---

## 🚫 明确禁止

```
❌ 自动生成墙厚
❌ 自动闭合房间
❌ 自动识别"在画墙"
❌ 自由角度（只能 0°/90°）
❌ Code 检查
❌ BOM / 材料清单
❌ 多人协作
❌ 3D / Isometric
```

---

## 🧠 关键规则

### 规则 1：线永远连接 node

```
不允许视觉重叠但数据不连
```

### 规则 2：所有长度是真实比例

```
显示 ft / in，不允许 px-only
```

### 规则 3：不做自动闭合

```
用户画什么就是什么
```

### 规则 4：速度 > 智能

```
不弹窗，不猜意图
```

---

## 💻 数据模型（核心）

```typescript
interface Node {
  id: string;
  x, y: number;
  connectedLines: string[];
  type: 'endpoint' | 'intersection';
}

interface Line {
  id: string;
  startNodeId: string;
  endNodeId: string;
  length: number;  // 真实单位（feet）
  angle: 0 | 90;   // 只允许水平/垂直
  type: 'wall' | 'guide';
}

interface Dimension {
  id: string;
  pointA, pointB: { x, y };
  displayText: string;  // "12'-6""
}
```

---

## 🖥 Desktop vs iPad

| 功能   | Desktop     | iPad       |
| ---- | ----------- | ---------- |
| 画线   | Mouse click | Pencil tap |
| 锁方向  | Shift       | 长按         |
| 退出工具 | Esc / L     | 工具栏        |
| 移动画布 | H + drag    | 两指拖动       |
| 缩放   | Scroll      | 双指捏合       |

---

## ✅ 验收标准

### 设计验收（给设计师）

- [ ] 是否只用"线"表达？
- [ ] 是否任何一步不需要教程？
- [ ] 是否像施工工具而不是设计软件？
- [ ] 是否 10 分钟能出图？

---

### 交互验收（CPO 口径）

> **一个老施工，用鼠标连点 6 下，**  
> **能画出一个房间轮廓，**  
> **不需要思考"我现在在哪个模式"。**

---

### 产品验收（CPO 口径）

> **一个做装修的人，不用看教程，**  
> **10 分钟内画出一张"敢发给客户/Inspector"的平面图。**

---

## 🎨 设计原则

```
施工工具感 > 设计感
干净 > 花哨
专业 > 美观
快速 > 完美
清晰 > 炫酷
可预测 > 智能
```

---

## ⏰ 设计时间估算

**P0（必须）：** 7天

- Design System: 2天
- App Shell: 1天
- Tool Bar: 1天
- Line Drawing: 3天

**P1（重要）：** 4天

- Dimension: 1天
- Grid & Snap: 1天
- Selection: 1天
- Export: 1天

**P2（可选）：** 2.5天

- iPad: 1天
- Mobile: 0.5天
- NOT Doing: 0.5天
- Cheat Sheet: 0.5天

**总计：** 13.5天

---

## 🚀 开发时间估算

**参考 Sprint 1 技术任务清单**

**PlanSnap MVP（Task C1-C4）：**

- C1: 数据模型（0.5天）
- C2: 2D 绘图引擎（2天）
- C3: 交互能力（1天）
- C4: 导出（0.5天）

**总计：** 4天开发

---

## 📎 相关文档

**完整文档：**

- PlanSnap 产品设计蓝图（CDO 版）
- Sprint 1 技术任务清单
- PlanSnap & IsoSnap 双产品线战略

**Figma 文件结构：**

- 参考产品设计蓝图
- 11个页面，详细交互规范

---

## 💡 记住这三句话

**CPO：**

> "快于 CAD，准于手画，10 分钟出图"

**设计师：**

> "施工工具感 > 设计感"

**开发者：**

> "线优先，网格磁力优先，比例真实"

---

**打印这张卡片，贴在桌上！** 📌
