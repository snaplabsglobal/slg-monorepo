# Sprint 1 æŠ€æœ¯ä»»åŠ¡æ¸…å• - PlanSnap & IsoSnap MVP

> **Sprint Duration:** 2-3 å‘¨ (10-15 å·¥ä½œæ—¥)  
> **Sprint Goal:** äº¤ä»˜ä¸¤ä¸ª"èƒ½ç”¨ã€èƒ½å–ã€ä¸è·‘å"çš„å·¥å…·çº§ MVP  
> **Target:** CTO + å¼€å‘å›¢é˜Ÿ  
> **Date:** 2026-02-02  
> **Version:** v1.0

---

## ğŸ¯ Sprint 1 æ ¸å¿ƒéªŒè¯ç›®æ ‡

### å”¯ä¸€éªŒè¯çš„äº‹æƒ…

> **ç”¨æˆ·èƒ½ä¸èƒ½é¡ºç•…ç”»å®Œï¼Œå¹¶æˆåŠŸå¯¼å‡ºä¸€å¼ "çœ‹å¾—æ‡‚çš„å›¾"**

**ä¸éªŒè¯ï¼š**
- âŒ Code åˆè§„æ€§
- âŒ ææ–™è®¡ç®—
- âŒ å¤šäººåä½œ
- âŒ äº‘åŒæ­¥
- âŒ é¡¹ç›®ç®¡ç†

---

## âš ï¸ ç¡¬æ€§åŸåˆ™ï¼ˆä¸å¯è¿åï¼‰

### ä¸‰æ¡é“å¾‹

```
âœ… å…±ç”¨ï¼šæŠ€æœ¯æ ˆ / åŸºç¡€è®¾æ–½
âŒ ä¸å…±ç”¨ï¼šäº¤äº’å±‚ / å·¥å…·æ  / æ“ä½œé€»è¾‘
âŒ ä¸å¼•å…¥ï¼šCode åˆ¤æ–­ / ææ–™è®¡ç®— / é¡¹ç›®ç®¡ç†

â†’ å¦‚æœä¸€ä¸ªåŠŸèƒ½æ— æ³•æ˜ç¡®å½’å± PlanSnap æˆ– IsoSnap
  â†’ æœ¬ Sprint ä¸åš
```

---

## ğŸ“‹ Sprint 1 ä»»åŠ¡æ€»è§ˆ

### Task åˆ†ç»„

| åˆ†ç»„ | ä»»åŠ¡æ•° | å·¥ä½œé‡ | ä¼˜å…ˆçº§ |
|------|--------|--------|--------|
| A. å…±ç”¨åº•å±‚ | 5 | 3-4å¤© | ğŸ”´ P0 |
| B. IsoSnap MVP | 5 | 4-5å¤© | ğŸ”´ P0 |
| C. PlanSnap MVP | 4 | 3-4å¤© | ğŸ”´ P0 |
| D. é›†æˆæµ‹è¯• | 2 | 1-2å¤© | ğŸŸ¡ P1 |

**æ€»å·¥ä½œé‡ä¼°ç®—ï¼š** 11-15å¤©

---

## A. å…±ç”¨åº•å±‚ï¼ˆ3-4å¤©ï¼‰

### ç›®æ ‡
> ä¸¤æ¬¾äº§å“ç”¨åŒä¸€å¥—"å¼•æ“"ï¼Œä½†ä¸Šå±‚å®Œå…¨ç‹¬ç«‹

---

### [ ] Task A1: é¡¹ç›®æ¶æ„æ­å»ºï¼ˆ1å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 1å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸ”´ P0

**ä»»åŠ¡å†…å®¹ï¼š**

1. **å»ºç«‹ Monorepo ç»“æ„**
```
/monorepo
  /packages
    /core              # å…±äº«æ ¸å¿ƒ
    /plan-snap         # PlanSnap ç‹¬ç«‹
    /iso-snap          # IsoSnap ç‹¬ç«‹
  /apps
    /web-plan          # PlanSnap PWA
    /web-iso           # IsoSnap PWA
```

2. **é…ç½®æ„å»ºå·¥å…·**
   - é€‰æ‹©ï¼šVite / Webpack / Turbo
   - é…ç½®ï¼šç‹¬ç«‹æ„å»ºã€çƒ­é‡è½½
   - ç¡®ä¿ï¼šä¸¤ä¸ª app å¯ä»¥ç‹¬ç«‹è¿è¡Œ

3. **é…ç½® TypeScript**
   - å…±äº« tsconfig
   - ç±»å‹å®šä¹‰å…±äº«

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] `npm run dev:plan` å¯ä»¥å¯åŠ¨ PlanSnap
- [ ] `npm run dev:iso` å¯ä»¥å¯åŠ¨ IsoSnap
- [ ] ä¸¤ä¸ªåº”ç”¨å¯ä»¥åŒæ—¶è¿è¡Œï¼ˆä¸åŒç«¯å£ï¼‰

---

### [ ] Task A2: Canvas æ¸²æŸ“å¼•æ“ï¼ˆ1å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 1å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸ”´ P0

**ä»»åŠ¡å†…å®¹ï¼š**

1. **é€‰æ‹© Canvas åº“**
   - æ¨èï¼šKonva.jsï¼ˆæ–‡æ¡£å¥½ã€åŠŸèƒ½å…¨ï¼‰
   - å¤‡é€‰ï¼šFabric.js / åŸç”Ÿ Canvas

2. **å®ç° CanvasEngine åŸºç±»**
```typescript
// /packages/core/src/canvas/CanvasEngine.ts

export abstract class CanvasEngine {
  protected canvas: HTMLCanvasElement;
  protected ctx: CanvasRenderingContext2D;
  
  constructor(canvasId: string) {
    this.canvas = document.getElementById(canvasId) as HTMLCanvasElement;
    this.ctx = this.canvas.getContext('2d')!;
  }
  
  // æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å®ç°
  abstract render(): void;
  abstract handleMouseDown(e: MouseEvent): void;
  abstract handleMouseMove(e: MouseEvent): void;
  abstract handleMouseUp(e: MouseEvent): void;
  
  // å…±äº«æ–¹æ³•
  clear(): void {
    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
  }
  
  resize(width: number, height: number): void {
    this.canvas.width = width;
    this.canvas.height = height;
  }
}
```

3. **å®ç°åŸºç¡€æ“ä½œ**
   - Panï¼ˆæ‹–åŠ¨è§†å›¾ï¼‰
   - Zoomï¼ˆç¼©æ”¾ï¼‰
   - Clearï¼ˆæ¸…ç©ºï¼‰

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] PlanSnap å’Œ IsoSnap éƒ½ç»§æ‰¿è‡ª CanvasEngine
- [ ] å¯ä»¥ Pan å’Œ Zoom
- [ ] ç”»å¸ƒæ¸²æŸ“æµç•…ï¼ˆ60fpsï¼‰

---

### [ ] Task A3: æœ¬åœ°å­˜å‚¨å¼•æ“ï¼ˆ0.5å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 0.5å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸ”´ P0

**ä»»åŠ¡å†…å®¹ï¼š**

1. **å®ç° StorageEngine**
```typescript
// /packages/core/src/storage/StorageEngine.ts

export class StorageEngine {
  private dbName = 'snaplabs-db';
  private version = 1;
  private db: IDBDatabase | null = null;
  
  async init(): Promise<void> {
    return new Promise((resolve, reject) => {
      const request = indexedDB.open(this.dbName, this.version);
      
      request.onerror = () => reject(request.error);
      request.onsuccess = () => {
        this.db = request.result;
        resolve();
      };
      
      request.onupgradeneeded = (event) => {
        const db = (event.target as IDBOpenDBRequest).result;
        
        // PlanSnap æ•°æ®è¡¨
        if (!db.objectStoreNames.contains('plan-projects')) {
          db.createObjectStore('plan-projects', { keyPath: 'id' });
        }
        
        // IsoSnap æ•°æ®è¡¨
        if (!db.objectStoreNames.contains('iso-projects')) {
          db.createObjectStore('iso-projects', { keyPath: 'id' });
        }
      };
    });
  }
  
  async save(store: string, data: any): Promise<void> {
    // ä¿å­˜æ•°æ®
  }
  
  async load(store: string, id: string): Promise<any> {
    // åŠ è½½æ•°æ®
  }
  
  async list(store: string): Promise<any[]> {
    // åˆ—å‡ºæ‰€æœ‰
  }
}
```

2. **æ•°æ®ç»“æ„å®šä¹‰**
```typescript
// PlanSnap é¡¹ç›®
interface PlanProject {
  id: string;
  name: string;
  data: PlanData;
  createdAt: Date;
  updatedAt: Date;
}

// IsoSnap é¡¹ç›®
interface IsoProject {
  id: string;
  name: string;
  data: IsoData;
  createdAt: Date;
  updatedAt: Date;
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] å¯ä»¥ä¿å­˜ PlanSnap é¡¹ç›®
- [ ] å¯ä»¥ä¿å­˜ IsoSnap é¡¹ç›®
- [ ] åˆ·æ–°é¡µé¢åå¯ä»¥åŠ è½½
- [ ] æ•°æ®ä¸ä¼šäº’ç›¸æ±¡æŸ“

---

### [ ] Task A4: å¯¼å‡ºå¼•æ“ï¼ˆ1å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 1å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸ”´ P0

**ä»»åŠ¡å†…å®¹ï¼š**

1. **å®ç° ExportEngine åŸºç±»**
```typescript
// /packages/core/src/export/ExportEngine.ts

export abstract class ExportEngine {
  abstract render(): Canvas;
  
  async exportPNG(): Promise<Blob> {
    const canvas = this.render();
    return new Promise((resolve) => {
      canvas.toBlob((blob) => resolve(blob!), 'image/png');
    });
  }
  
  async exportPDF(): Promise<Blob> {
    const canvas = this.render();
    
    // ä½¿ç”¨ jsPDF
    const pdf = new jsPDF({
      orientation: 'landscape',
      unit: 'px',
      format: [canvas.width, canvas.height]
    });
    
    const imgData = canvas.toDataURL('image/png');
    pdf.addImage(imgData, 'PNG', 0, 0, canvas.width, canvas.height);
    
    return pdf.output('blob');
  }
  
  // æ·»åŠ æ ‡é¢˜æ ï¼ˆå­ç±»å¯è¦†ç›–ï¼‰
  protected addHeader(ctx: CanvasRenderingContext2D): void {
    ctx.font = '16px sans-serif';
    ctx.fillStyle = 'black';
    ctx.fillText('Created with SnapLabs', 10, 20);
  }
  
  // æ·»åŠ å…è´£å£°æ˜ï¼ˆå­ç±»å¯è¦†ç›–ï¼‰
  protected addDisclaimer(ctx: CanvasRenderingContext2D): void {
    ctx.font = '12px sans-serif';
    ctx.fillStyle = 'gray';
    ctx.fillText('For reference only - Not for construction', 10, canvas.height - 10);
  }
}
```

2. **äº§å“ç‰¹å®šå®ç°**
```typescript
// /packages/iso-snap/src/export/IsoExportEngine.ts
export class IsoExportEngine extends ExportEngine {
  render(): Canvas {
    // æ¸²æŸ“ Isometric å›¾
    // æ·»åŠ å·¥ç¨‹å›¾çº¸é£æ ¼çš„å›¾æ¡†
  }
  
  protected addDisclaimer(ctx: CanvasRenderingContext2D): void {
    ctx.fillText('Isometric sketch â€“ for reference only', 10, canvas.height - 10);
  }
}

// /packages/plan-snap/src/export/PlanExportEngine.ts
export class PlanExportEngine extends ExportEngine {
  render(): Canvas {
    // æ¸²æŸ“ 2D å¹³é¢å›¾
    // æ·»åŠ å»ºç­‘å¸ˆé£æ ¼çš„å›¾æ¡†
  }
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] å¯ä»¥å¯¼å‡º PNGï¼ˆæ¸…æ™°ã€é«˜åˆ†è¾¨ç‡ï¼‰
- [ ] å¯ä»¥å¯¼å‡º PDFï¼ˆA4/Letterï¼‰
- [ ] è‡ªåŠ¨æ·»åŠ å…è´£å£°æ˜
- [ ] IsoSnap å’Œ PlanSnap çš„å¯¼å‡ºé£æ ¼ä¸åŒ

---

### [ ] Task A5: PWA åŸºç¡€é…ç½®ï¼ˆ0.5å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 0.5å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸŸ¡ P1

**ä»»åŠ¡å†…å®¹ï¼š**

1. **åˆ›å»º manifest.json**
```json
// /apps/web-iso/public/manifest.json
{
  "name": "IsoSnap - Isometric Sketching Tool",
  "short_name": "IsoSnap",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#1e293b",
  "theme_color": "#2563eb",
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}

// /apps/web-plan/public/manifest.json
{
  "name": "PlanSnap - Floor Plan Tool",
  "short_name": "PlanSnap",
  // ...
}
```

2. **Service Workerï¼ˆåŸºç¡€ï¼‰**
```javascript
// /apps/web-iso/public/sw.js
self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open('iso-snap-v1').then((cache) => {
      return cache.addAll([
        '/',
        '/index.html',
        '/main.js',
        '/styles.css'
      ]);
    })
  );
});

self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request).then((response) => {
      return response || fetch(event.request);
    })
  );
});
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] å¯ä»¥"æ·»åŠ åˆ°ä¸»å±å¹•"ï¼ˆiOS/Androidï¼‰
- [ ] ç¦»çº¿å¯ä»¥æ‰“å¼€åº”ç”¨
- [ ] æœ‰æ­£ç¡®çš„å›¾æ ‡å’Œåç§°

---

## B. IsoSnap MVPï¼ˆ4-5å¤©ï¼‰

### ç›®æ ‡
> ç®¡å·¥èƒ½ç”»å‡º WC + lav + vent çš„ isometricï¼Œçº¿æ¡çœŸå®è¿æ¥ã€å¯ä¿®æ”¹ã€å¯å¯¼å‡º

---

### [ ] Task B1: æ•°æ®æ¨¡å‹ï¼ˆ0.5å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 0.5å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸ”´ P0

**ä»»åŠ¡å†…å®¹ï¼š**

**å®šä¹‰æ ¸å¿ƒæ•°æ®ç»“æ„ï¼š**

```typescript
// /packages/iso-snap/src/types/index.ts

// èŠ‚ç‚¹
export interface Node {
  id: string;
  x: number;
  y: number;
  connectedEdges: string[];
}

// çº¿æ®µï¼ˆç®¡é“ï¼‰
export interface Segment {
  id: string;
  fromNodeId: string;
  toNodeId: string;
  type: 'drain' | 'vent';
  diameter: '1-1/2"' | '2"' | '3"' | '4"';
  direction: 'vertical' | 'left-down' | 'right-down';
}

// Fixture
export interface Fixture {
  id: string;
  type: 'WC' | 'LAV' | 'SINK' | 'SHOWER' | 'FD';
  nodeId: string;
  label?: string;
}

// å®Œæ•´é¡¹ç›®æ•°æ®
export interface IsoData {
  nodes: Map<string, Node>;
  segments: Map<string, Segment>;
  fixtures: Map<string, Fixture>;
}

// å…¨å±€çŠ¶æ€
export interface IsoState {
  data: IsoData;
  selectedNodes: Set<string>;
  selectedSegments: Set<string>;
  currentTool: 'drain' | 'vent' | 'select' | 'fixture';
  currentDiameter: string;
  history: HistoryAction[];
  historyIndex: number;
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] ç±»å‹å®šä¹‰å®Œæ•´
- [ ] æ•°æ®ç»“æ„æ¸…æ™°
- [ ] ä¸ä¹‹å‰çš„è®¾è®¡ä¸€è‡´

---

### [ ] Task B2: ç»˜åˆ¶é€»è¾‘ï¼ˆ2å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 2å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸ”´ P0

**ä»»åŠ¡å†…å®¹ï¼š**

1. **ä¸‰æ–¹å‘é”å®šç®—æ³•**
```typescript
// /packages/iso-snap/src/utils/directionLock.ts

export enum Direction {
  VERTICAL = 'vertical',
  LEFT_DOWN = 'left-down',
  RIGHT_DOWN = 'right-down'
}

export function lockToDirection(
  startX: number,
  startY: number,
  mouseX: number,
  mouseY: number
): { endX: number; endY: number; direction: Direction } {
  
  const dx = mouseX - startX;
  const dy = mouseY - startY;
  const angle = Math.atan2(dy, dx) * (180 / Math.PI);
  
  // åˆ¤æ–­æœ€æ¥è¿‘çš„æ–¹å‘
  if (Math.abs(angle - 90) < 30 || Math.abs(angle + 90) < 30) {
    // Vertical
    return {
      endX: startX,
      endY: mouseY,
      direction: Direction.VERTICAL
    };
  } else if (angle > 15 && angle < 75) {
    // Right-down (45Â°)
    const distance = Math.min(Math.abs(dx), Math.abs(dy));
    return {
      endX: startX + distance,
      endY: startY + distance,
      direction: Direction.RIGHT_DOWN
    };
  } else {
    // Left-down (45Â°)
    const distance = Math.min(Math.abs(dx), Math.abs(dy));
    return {
      endX: startX - distance,
      endY: startY + distance,
      direction: Direction.LEFT_DOWN
    };
  }
}
```

2. **èŠ‚ç‚¹æ•æ‰ç®—æ³•**
```typescript
// /packages/iso-snap/src/utils/snap.ts

export function findNearestNode(
  x: number,
  y: number,
  nodes: Map<string, Node>,
  snapDistance: number = 15
): Node | null {
  
  let nearest: Node | null = null;
  let minDistance = snapDistance;
  
  for (const node of nodes.values()) {
    const distance = Math.sqrt(
      (node.x - x) ** 2 + (node.y - y) ** 2
    );
    
    if (distance < minDistance) {
      minDistance = distance;
      nearest = node;
    }
  }
  
  return nearest;
}
```

3. **ç»˜åˆ¶äº¤äº’**
```typescript
// /packages/iso-snap/src/canvas/IsoCanvas.ts

export class IsoCanvas extends CanvasEngine {
  private state: IsoState;
  private drawingState: {
    isDrawing: boolean;
    startNode: Node | null;
    tempEndX: number;
    tempEndY: number;
  } = {
    isDrawing: false,
    startNode: null,
    tempEndX: 0,
    tempEndY: 0
  };
  
  handleMouseDown(e: MouseEvent): void {
    if (this.state.currentTool !== 'drain' && this.state.currentTool !== 'vent') {
      return;
    }
    
    const nearNode = findNearestNode(e.offsetX, e.offsetY, this.state.data.nodes);
    
    if (nearNode) {
      this.drawingState.startNode = nearNode;
    } else {
      this.drawingState.startNode = this.createNode(e.offsetX, e.offsetY);
    }
    
    this.drawingState.isDrawing = true;
  }
  
  handleMouseMove(e: MouseEvent): void {
    if (!this.drawingState.isDrawing) return;
    
    this.drawingState.tempEndX = e.offsetX;
    this.drawingState.tempEndY = e.offsetY;
    
    this.render();
  }
  
  handleMouseUp(e: MouseEvent): void {
    if (!this.drawingState.isDrawing) return;
    
    const nearNode = findNearestNode(e.offsetX, e.offsetY, this.state.data.nodes);
    let endNode: Node;
    
    if (nearNode && nearNode !== this.drawingState.startNode) {
      endNode = nearNode;
    } else {
      endNode = this.createNode(e.offsetX, e.offsetY);
    }
    
    this.createSegment(this.drawingState.startNode!, endNode);
    
    this.drawingState.isDrawing = false;
    this.state.currentTool = 'select'; // è‡ªåŠ¨å›åˆ° Select
  }
  
  private createNode(x: number, y: number): Node {
    const node: Node = {
      id: generateId(),
      x,
      y,
      connectedEdges: []
    };
    
    this.state.data.nodes.set(node.id, node);
    return node;
  }
  
  private createSegment(from: Node, to: Node): void {
    const locked = lockToDirection(from.x, from.y, to.x, to.y);
    
    const segment: Segment = {
      id: generateId(),
      fromNodeId: from.id,
      toNodeId: to.id,
      type: this.state.currentTool as 'drain' | 'vent',
      diameter: this.state.currentDiameter as any,
      direction: locked.direction
    };
    
    this.state.data.segments.set(segment.id, segment);
    from.connectedEdges.push(segment.id);
    to.connectedEdges.push(segment.id);
    
    this.addToHistory({ type: 'create-segment', segmentId: segment.id });
  }
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] ç”»çº¿æ—¶åªèƒ½ç”»3ç§æ–¹å‘
- [ ] é¼ æ ‡é è¿‘èŠ‚ç‚¹æ—¶è‡ªåŠ¨å¸é™„
- [ ] çº¿æ®µç¡®å®è¿æ¥åˆ°èŠ‚ç‚¹ï¼ˆæ•°æ®ç»“æ„å±‚é¢ï¼‰
- [ ] ç”»å®Œä¸€æ¡çº¿è‡ªåŠ¨åˆ‡æ¢åˆ° Select

---

### [ ] Task B3: ç¼–è¾‘èƒ½åŠ›ï¼ˆ1.5å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 1.5å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸ”´ P0

**ä»»åŠ¡å†…å®¹ï¼š**

1. **Select æ¨¡å¼**
```typescript
handleMouseDown_Select(e: MouseEvent): void {
  const clickedNode = this.findNodeAt(e.offsetX, e.offsetY);
  const clickedSegment = this.findSegmentAt(e.offsetX, e.offsetY);
  
  if (clickedNode) {
    if (!e.shiftKey) {
      this.state.selectedNodes.clear();
      this.state.selectedSegments.clear();
    }
    this.state.selectedNodes.add(clickedNode.id);
  } else if (clickedSegment) {
    if (!e.shiftKey) {
      this.state.selectedNodes.clear();
      this.state.selectedSegments.clear();
    }
    this.state.selectedSegments.add(clickedSegment.id);
  } else {
    // å¼€å§‹æ¡†é€‰
    this.startBoxSelection(e.offsetX, e.offsetY);
  }
}
```

2. **èŠ‚ç‚¹æ‹–åŠ¨**
```typescript
handleNodeDrag(node: Node, newX: number, newY: number): void {
  node.x = newX;
  node.y = newY;
  
  // è¿æ¥çš„çº¿æ®µä¼šè‡ªåŠ¨è·Ÿéšï¼ˆå› ä¸ºå¼•ç”¨åŒä¸€ä¸ª nodeï¼‰
  this.render();
}
```

3. **æ¡†é€‰**
```typescript
handleBoxSelection(startX, startY, endX, endY): void {
  const box = {
    left: Math.min(startX, endX),
    top: Math.min(startY, endY),
    right: Math.max(startX, endX),
    bottom: Math.max(startY, endY)
  };
  
  // é€‰ä¸­æ¡†å†…çš„èŠ‚ç‚¹
  for (const node of this.state.data.nodes.values()) {
    if (this.isPointInBox(node.x, node.y, box)) {
      this.state.selectedNodes.add(node.id);
    }
  }
  
  // é€‰ä¸­æ¡†å†…çš„çº¿æ®µ
  for (const segment of this.state.data.segments.values()) {
    const fromNode = this.state.data.nodes.get(segment.fromNodeId)!;
    const toNode = this.state.data.nodes.get(segment.toNodeId)!;
    
    if (this.isPointInBox(fromNode.x, fromNode.y, box) ||
        this.isPointInBox(toNode.x, toNode.y, box)) {
      this.state.selectedSegments.add(segment.id);
    }
  }
}
```

4. **Undo/Redo**
```typescript
// å†å²è®°å½•
interface HistoryAction {
  type: 'create-segment' | 'delete-segment' | 'move-node' | 'delete-node';
  data: any;
}

undo(): void {
  if (this.state.historyIndex < 0) return;
  
  const action = this.state.history[this.state.historyIndex];
  
  switch (action.type) {
    case 'create-segment':
      this.state.data.segments.delete(action.data.segmentId);
      break;
    case 'delete-segment':
      this.state.data.segments.set(action.data.segmentId, action.data.segment);
      break;
    // ...
  }
  
  this.state.historyIndex--;
  this.render();
}

redo(): void {
  // ç±»ä¼¼é€»è¾‘
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] å¯ä»¥ç‚¹é€‰èŠ‚ç‚¹å’Œçº¿æ®µ
- [ ] å¯ä»¥æ‹–åŠ¨èŠ‚ç‚¹ï¼ˆçº¿æ®µè·Ÿéšï¼‰
- [ ] å¯ä»¥æ¡†é€‰å¤šä¸ªå¯¹è±¡
- [ ] Delete å¯ä»¥åˆ é™¤é€‰ä¸­å¯¹è±¡
- [ ] Undo/Redo è‡³å°‘ 20 æ­¥

---

### [ ] Task B4: è§†è§‰åé¦ˆï¼ˆ0.5å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 0.5å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸŸ¡ P1

**ä»»åŠ¡å†…å®¹ï¼š**

**å®ç°4ä¸ªå…³é”®åé¦ˆï¼š**

1. **Hover èŠ‚ç‚¹é«˜äº®**
```typescript
render(): void {
  // ...
  
  // æ¸²æŸ“èŠ‚ç‚¹
  for (const node of this.state.data.nodes.values()) {
    const isHovered = (this.hoveredNode?.id === node.id);
    const isSelected = this.state.selectedNodes.has(node.id);
    
    const radius = isHovered ? 6 : (isSelected ? 5 : 4);
    const color = isSelected ? '#fbbf24' : (isHovered ? 'white' : '#94a3b8');
    
    this.ctx.beginPath();
    this.ctx.arc(node.x, node.y, radius, 0, Math.PI * 2);
    this.ctx.fillStyle = color;
    this.ctx.fill();
  }
}
```

2. **å¯æ•æ‰èŠ‚ç‚¹æç¤º**
```typescript
if (this.drawingState.isDrawing) {
  const nearNode = findNearestNode(
    this.drawingState.tempEndX,
    this.drawingState.tempEndY,
    this.state.data.nodes
  );
  
  if (nearNode) {
    // ç”»ç»¿è‰²æ•æ‰åœˆ
    this.ctx.strokeStyle = 'rgba(34, 197, 94, 0.8)';
    this.ctx.lineWidth = 2;
    this.ctx.setLineDash([3, 3]);
    this.ctx.beginPath();
    this.ctx.arc(nearNode.x, nearNode.y, 10, 0, Math.PI * 2);
    this.ctx.stroke();
    this.ctx.setLineDash([]);
  }
}
```

3. **é€‰ä¸­é«˜äº®**
```typescript
// æ¸²æŸ“çº¿æ®µ
for (const segment of this.state.data.segments.values()) {
  const isSelected = this.state.selectedSegments.has(segment.id);
  
  this.ctx.lineWidth = isSelected ? 4 : 3;
  this.ctx.strokeStyle = isSelected 
    ? '#fbbf24'
    : (segment.type === 'drain' ? '#60a5fa' : '#34d399');
  
  // ... ç”»çº¿
}
```

4. **æ–¹å‘è™šçº¿é¢„è§ˆ**
```typescript
if (this.drawingState.isDrawing && this.drawingState.startNode) {
  const locked = lockToDirection(
    this.drawingState.startNode.x,
    this.drawingState.startNode.y,
    this.drawingState.tempEndX,
    this.drawingState.tempEndY
  );
  
  // ç”»è™šçº¿é¢„è§ˆ
  this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
  this.ctx.setLineDash([5, 5]);
  this.ctx.beginPath();
  this.ctx.moveTo(this.drawingState.startNode.x, this.drawingState.startNode.y);
  this.ctx.lineTo(locked.endX, locked.endY);
  this.ctx.stroke();
  this.ctx.setLineDash([]);
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] Hover èŠ‚ç‚¹æ—¶èŠ‚ç‚¹å˜å¤§
- [ ] å¯æ•æ‰èŠ‚ç‚¹æ˜¾ç¤ºç»¿è‰²åœˆ
- [ ] é€‰ä¸­å¯¹è±¡é«˜äº®ï¼ˆé»„è‰²ï¼‰
- [ ] ç”»çº¿æ—¶æ˜¾ç¤ºè™šçº¿é¢„è§ˆ

---

### [ ] Task B5: Fixture å’Œç®¡å¾„æ ‡æ³¨ï¼ˆ0.5å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 0.5å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸŸ¡ P1

**ä»»åŠ¡å†…å®¹ï¼š**

1. **Fixture æ”¾ç½®**
```typescript
handleCanvasClick_Fixture(e: MouseEvent): void {
  const nearNode = findNearestNode(e.offsetX, e.offsetY, this.state.data.nodes);
  
  if (nearNode) {
    const fixture: Fixture = {
      id: generateId(),
      type: this.selectedFixtureType,
      nodeId: nearNode.id
    };
    
    this.state.data.fixtures.set(fixture.id, fixture);
    this.render();
  } else {
    this.showToast('Click on a node to place fixture');
  }
}

// æ¸²æŸ“ Fixture
renderFixture(fixture: Fixture): void {
  const node = this.state.data.nodes.get(fixture.nodeId);
  if (!node) return;
  
  this.ctx.font = 'bold 16px sans-serif';
  this.ctx.fillStyle = 'white';
  this.ctx.textAlign = 'center';
  this.ctx.fillText(fixture.type, node.x + 20, node.y - 10);
}
```

2. **ç®¡å¾„æ ‡æ³¨**
```typescript
renderSegment(segment: Segment): void {
  const fromNode = this.state.data.nodes.get(segment.fromNodeId)!;
  const toNode = this.state.data.nodes.get(segment.toNodeId)!;
  
  // ç”»çº¿
  // ...
  
  // åœ¨ä¸­ç‚¹æ˜¾ç¤ºç®¡å¾„
  const midX = (fromNode.x + toNode.x) / 2;
  const midY = (fromNode.y + toNode.y) / 2;
  
  this.ctx.font = '12px sans-serif';
  this.ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
  this.ctx.textAlign = 'center';
  this.ctx.fillText(segment.diameter, midX, midY - 8);
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] å¯ä»¥åœ¨èŠ‚ç‚¹ä¸Šæ”¾ç½® Fixtureï¼ˆWC/LAV/SINK...ï¼‰
- [ ] Fixture æ˜¾ç¤ºä¸ºæ–‡æœ¬æ ‡ç­¾
- [ ] çº¿æ®µä¸Šæ˜¾ç¤ºç®¡å¾„æ ‡æ³¨ï¼ˆå¦‚ "2""ï¼‰

---

## C. PlanSnap MVPï¼ˆ3-4å¤©ï¼‰

### ç›®æ ‡
> æ™®é€š contractor èƒ½åœ¨ 10 åˆ†é’Ÿå†…ç”»ä¸€ä¸ªå¯è§£é‡Šçš„ 2D å¹³é¢ layout

---

### [ ] Task C1: æ•°æ®æ¨¡å‹ï¼ˆ0.5å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 0.5å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸ”´ P0

**ä»»åŠ¡å†…å®¹ï¼š**

**å®šä¹‰æ ¸å¿ƒæ•°æ®ç»“æ„ï¼š**

```typescript
// /packages/plan-snap/src/types/index.ts

// å¢™
export interface Wall {
  id: string;
  startX: number;
  startY: number;
  endX: number;
  endY: number;
  thickness: number;
  type: 'exterior' | 'interior';
}

// æˆ¿é—´
export interface Room {
  id: string;
  name: string;
  walls: string[]; // Wall IDs
  color?: string;
}

// ç¬¦å·ï¼ˆé—¨/çª—ï¼‰
export interface Symbol {
  id: string;
  type: 'door' | 'window';
  wallId: string;
  position: number; // 0-1ï¼Œåœ¨å¢™ä¸Šçš„ä½ç½®
  width: number;
}

// å®Œæ•´é¡¹ç›®æ•°æ®
export interface PlanData {
  walls: Map<string, Wall>;
  rooms: Map<string, Room>;
  symbols: Map<string, Symbol>;
}

// å…¨å±€çŠ¶æ€
export interface PlanState {
  data: PlanData;
  selectedWalls: Set<string>;
  selectedRooms: Set<string>;
  currentTool: 'wall' | 'room' | 'door' | 'window' | 'select';
  gridSize: number;
  snapToGrid: boolean;
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] ç±»å‹å®šä¹‰å®Œæ•´
- [ ] æ•°æ®ç»“æ„æ¸…æ™°
- [ ] ç¬¦åˆ 2D å¹³é¢å›¾é€»è¾‘

---

### [ ] Task C2: 2D ç»˜å›¾å¼•æ“ï¼ˆ2å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 2å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸ”´ P0

**ä»»åŠ¡å†…å®¹ï¼š**

1. **å¢™ä½“ç»˜åˆ¶**
```typescript
// /packages/plan-snap/src/canvas/PlanCanvas.ts

export class PlanCanvas extends CanvasEngine {
  private state: PlanState;
  private drawingState: {
    isDrawing: boolean;
    startX: number;
    startY: number;
    tempEndX: number;
    tempEndY: number;
  };
  
  handleMouseDown(e: MouseEvent): void {
    if (this.state.currentTool === 'wall') {
      const snapped = this.snapToGrid(e.offsetX, e.offsetY);
      
      this.drawingState.isDrawing = true;
      this.drawingState.startX = snapped.x;
      this.drawingState.startY = snapped.y;
    }
  }
  
  handleMouseMove(e: MouseEvent): void {
    if (!this.drawingState.isDrawing) return;
    
    const snapped = this.snapToGrid(e.offsetX, e.offsetY);
    this.drawingState.tempEndX = snapped.x;
    this.drawingState.tempEndY = snapped.y;
    
    this.render();
  }
  
  handleMouseUp(e: MouseEvent): void {
    if (!this.drawingState.isDrawing) return;
    
    const wall: Wall = {
      id: generateId(),
      startX: this.drawingState.startX,
      startY: this.drawingState.startY,
      endX: this.drawingState.tempEndX,
      endY: this.drawingState.tempEndY,
      thickness: 8,
      type: 'interior'
    };
    
    this.state.data.walls.set(wall.id, wall);
    
    this.drawingState.isDrawing = false;
    this.state.currentTool = 'select'; // è‡ªåŠ¨å›åˆ° Select
  }
  
  private snapToGrid(x: number, y: number): { x: number; y: number } {
    if (!this.state.snapToGrid) return { x, y };
    
    const gridSize = this.state.gridSize;
    return {
      x: Math.round(x / gridSize) * gridSize,
      y: Math.round(y / gridSize) * gridSize
    };
  }
  
  renderWall(wall: Wall): void {
    this.ctx.strokeStyle = wall.type === 'exterior' ? '#334155' : '#64748b';
    this.ctx.lineWidth = wall.thickness;
    this.ctx.lineCap = 'square';
    
    this.ctx.beginPath();
    this.ctx.moveTo(wall.startX, wall.startY);
    this.ctx.lineTo(wall.endX, wall.endY);
    this.ctx.stroke();
  }
}
```

2. **Grid ç³»ç»Ÿ**
```typescript
renderGrid(): void {
  const gridSize = this.state.gridSize;
  
  this.ctx.strokeStyle = 'rgba(100, 116, 139, 0.1)';
  this.ctx.lineWidth = 1;
  
  // ç«–çº¿
  for (let x = 0; x < this.canvas.width; x += gridSize) {
    this.ctx.beginPath();
    this.ctx.moveTo(x, 0);
    this.ctx.lineTo(x, this.canvas.height);
    this.ctx.stroke();
  }
  
  // æ¨ªçº¿
  for (let y = 0; y < this.canvas.height; y += gridSize) {
    this.ctx.beginPath();
    this.ctx.moveTo(0, y);
    this.ctx.lineTo(this.canvas.width, y);
    this.ctx.stroke();
  }
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] å¯ä»¥ç”»å¢™ï¼ˆæ‹–æ‹½æ–¹å¼ï¼‰
- [ ] å¢™è‡ªåŠ¨å¯¹é½åˆ° Grid
- [ ] èƒŒæ™¯æ˜¾ç¤ºæ·¡æ·¡çš„ Grid
- [ ] ç”»å®Œè‡ªåŠ¨åˆ‡æ¢åˆ° Select

---

### [ ] Task C3: äº¤äº’èƒ½åŠ›ï¼ˆ1å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 1å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸ”´ P0

**ä»»åŠ¡å†…å®¹ï¼š**

1. **é€‰æ‹©å’Œæ‹–åŠ¨**
```typescript
handleMouseDown_Select(e: MouseEvent): void {
  const clickedWall = this.findWallAt(e.offsetX, e.offsetY);
  
  if (clickedWall) {
    if (!e.shiftKey) {
      this.state.selectedWalls.clear();
    }
    this.state.selectedWalls.add(clickedWall.id);
    
    // å¼€å§‹æ‹–åŠ¨
    this.startDragging(clickedWall, e.offsetX, e.offsetY);
  } else {
    // æ¡†é€‰
    this.startBoxSelection(e.offsetX, e.offsetY);
  }
}

dragWall(wall: Wall, deltaX: number, deltaY: number): void {
  wall.startX += deltaX;
  wall.startY += deltaY;
  wall.endX += deltaX;
  wall.endY += deltaY;
  
  this.render();
}
```

2. **æ‹‰ä¼¸ï¼ˆè°ƒæ•´é•¿åº¦ï¼‰**
```typescript
// ç‚¹å‡»å¢™çš„ç«¯ç‚¹å¯ä»¥æ‹‰ä¼¸
handleWallEndpointDrag(wall: Wall, endpoint: 'start' | 'end', newX: number, newY: number): void {
  if (endpoint === 'start') {
    wall.startX = newX;
    wall.startY = newY;
  } else {
    wall.endX = newX;
    wall.endY = newY;
  }
  
  this.render();
}
```

3. **å¯¹é½è¾…åŠ©çº¿**
```typescript
// å½“æ‹–åŠ¨æ—¶ï¼Œæ˜¾ç¤ºå¯¹é½è¾…åŠ©çº¿
renderAlignmentGuides(draggedWall: Wall): void {
  // æ£€æŸ¥æ˜¯å¦ä¸å…¶ä»–å¢™å¯¹é½
  for (const wall of this.state.data.walls.values()) {
    if (wall === draggedWall) continue;
    
    // æ°´å¹³å¯¹é½
    if (Math.abs(wall.startY - draggedWall.startY) < 5) {
      this.ctx.strokeStyle = 'rgba(34, 197, 94, 0.5)';
      this.ctx.setLineDash([3, 3]);
      this.ctx.beginPath();
      this.ctx.moveTo(0, wall.startY);
      this.ctx.lineTo(this.canvas.width, wall.startY);
      this.ctx.stroke();
      this.ctx.setLineDash([]);
    }
    
    // å‚ç›´å¯¹é½
    // ...
  }
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] å¯ä»¥é€‰æ‹©å¢™
- [ ] å¯ä»¥æ‹–åŠ¨å¢™
- [ ] å¯ä»¥æ‹‰ä¼¸å¢™ï¼ˆæ”¹å˜é•¿åº¦ï¼‰
- [ ] æ‹–åŠ¨æ—¶æ˜¾ç¤ºå¯¹é½è¾…åŠ©çº¿
- [ ] å¯ä»¥æ¡†é€‰å¤šä¸ªå¢™

---

### [ ] Task C4: å¯¼å‡ºï¼ˆ0.5å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 0.5å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸŸ¡ P1

**ä»»åŠ¡å†…å®¹ï¼š**

**å®ç° PlanExportEngineï¼š**

```typescript
// /packages/plan-snap/src/export/PlanExportEngine.ts

export class PlanExportEngine extends ExportEngine {
  constructor(private state: PlanState) {
    super();
  }
  
  render(): Canvas {
    const canvas = document.createElement('canvas');
    canvas.width = 1200;
    canvas.height = 900;
    const ctx = canvas.getContext('2d')!;
    
    // ç™½è‰²èƒŒæ™¯
    ctx.fillStyle = 'white';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // æ¸²æŸ“ Gridï¼ˆæ·¡ï¼‰
    this.renderGrid(ctx);
    
    // æ¸²æŸ“å¢™ä½“ï¼ˆé»‘è‰²ï¼‰
    for (const wall of this.state.data.walls.values()) {
      ctx.strokeStyle = 'black';
      ctx.lineWidth = wall.thickness;
      ctx.beginPath();
      ctx.moveTo(wall.startX, wall.startY);
      ctx.lineTo(wall.endX, wall.endY);
      ctx.stroke();
    }
    
    // æ·»åŠ å›¾æ¡†ï¼ˆå»ºç­‘å¸ˆé£æ ¼ï¼‰
    this.addArchitectureFrame(ctx, canvas.width, canvas.height);
    
    // æ·»åŠ å…è´£å£°æ˜
    this.addDisclaimer(ctx, canvas.height);
    
    return canvas;
  }
  
  private addArchitectureFrame(ctx: CanvasRenderingContext2D, width: number, height: number): void {
    // å¤–æ¡†
    ctx.strokeStyle = 'black';
    ctx.lineWidth = 2;
    ctx.strokeRect(10, 10, width - 20, height - 20);
    
    // æ ‡é¢˜æ 
    ctx.fillStyle = 'black';
    ctx.font = '20px sans-serif';
    ctx.fillText('FLOOR PLAN', 30, 40);
    
    // æ—¥æœŸ
    ctx.font = '12px sans-serif';
    ctx.fillText(new Date().toLocaleDateString(), width - 150, 40);
  }
  
  protected addDisclaimer(ctx: CanvasRenderingContext2D, height: number): void {
    ctx.font = '10px sans-serif';
    ctx.fillStyle = 'gray';
    ctx.fillText('For reference only - Not for permit or construction', 30, height - 20);
  }
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] å¯¼å‡ºçš„ PDF æ˜¯é»‘ç™½çº¿ç¨¿
- [ ] æœ‰å»ºç­‘å¸ˆé£æ ¼çš„å›¾æ¡†
- [ ] æœ‰å…è´£å£°æ˜
- [ ] æ¸…æ™°åº¦é«˜ï¼Œå¯æ‰“å°

---

## D. é›†æˆæµ‹è¯•ï¼ˆ1-2å¤©ï¼‰

### [ ] Task D1: ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆ1å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 1å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸŸ¡ P1

**ä»»åŠ¡å†…å®¹ï¼š**

**æµ‹è¯•åœºæ™¯ï¼š**

1. **IsoSnap å®Œæ•´æµç¨‹**
```
æ­¥éª¤ï¼š
1. æ‰“å¼€ IsoSnap
2. é€‰æ‹© Drain å·¥å…·
3. ç”»ä¸€æ¡ drainï¼ˆ45Â° right-downï¼‰
4. ä» drain ç»ˆç‚¹ç”»ä¸€æ¡ ventï¼ˆverticalï¼‰
5. åœ¨èŠ‚ç‚¹ä¸Šæ”¾ç½® WC fixture
6. æ¡†é€‰æ‰€æœ‰å¯¹è±¡
7. æ‹–åŠ¨æ•´ä½“ç§»åŠ¨
8. Undo
9. å¯¼å‡º PDF

éªŒæ”¶ï¼š
- æ‰€æœ‰ç®¡é“çœŸå®è¿æ¥
- å¯ä»¥ä¿®æ”¹
- å¯¼å‡ºæ¸…æ™°
```

2. **PlanSnap å®Œæ•´æµç¨‹**
```
æ­¥éª¤ï¼š
1. æ‰“å¼€ PlanSnap
2. é€‰æ‹© Wall å·¥å…·
3. ç”»ä¸€ä¸ªçŸ©å½¢æˆ¿é—´ï¼ˆ4 é¢å¢™ï¼‰
4. æ‹–åŠ¨ä¸€é¢å¢™
5. æ‹‰ä¼¸å¢™çš„é•¿åº¦
6. æ¡†é€‰æ‰€æœ‰å¢™
7. Undo
8. å¯¼å‡º PDF

éªŒæ”¶ï¼š
- å¢™å¯ä»¥æ‹–åŠ¨å’Œæ‹‰ä¼¸
- Grid å¯¹é½æ­£å¸¸
- å¯¼å‡ºæ¸…æ™°
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] IsoSnap å®Œæ•´æµç¨‹é€šè¿‡
- [ ] PlanSnap å®Œæ•´æµç¨‹é€šè¿‡
- [ ] æ—  console é”™è¯¯
- [ ] æ€§èƒ½æµç•…ï¼ˆ60fpsï¼‰

---

### [ ] Task D2: å­˜å‚¨å’Œæ¢å¤æµ‹è¯•ï¼ˆ0.5å¤©ï¼‰

**è´£ä»»äººï¼š** CTO  
**å·¥ä½œé‡ï¼š** 0.5å¤©  
**ä¼˜å…ˆçº§ï¼š** ğŸŸ¡ P1

**ä»»åŠ¡å†…å®¹ï¼š**

**æµ‹è¯•åœºæ™¯ï¼š**

```
IsoSnap:
1. ç”»ä¸€å¥—ç®¡é“ç³»ç»Ÿ
2. åˆ·æ–°é¡µé¢
3. éªŒè¯ï¼šæ•°æ®æ˜¯å¦æ¢å¤

PlanSnap:
1. ç”»ä¸€ä¸ªå¹³é¢å›¾
2. åˆ·æ–°é¡µé¢
3. éªŒè¯ï¼šæ•°æ®æ˜¯å¦æ¢å¤

è·¨äº§å“:
1. IsoSnap ç”»å›¾ â†’ ä¿å­˜
2. PlanSnap ç”»å›¾ â†’ ä¿å­˜
3. åˆ·æ–°
4. éªŒè¯ï¼šä¸¤ä¸ªé¡¹ç›®äº’ä¸å¹²æ‰°
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] IsoSnap æ•°æ®å¯ä»¥æ¢å¤
- [ ] PlanSnap æ•°æ®å¯ä»¥æ¢å¤
- [ ] ä¸¤ä¸ªäº§å“çš„æ•°æ®ä¸ä¼šäº’ç›¸æ±¡æŸ“

---

## ğŸ“‹ Sprint 1 æ€»éªŒæ”¶æ ‡å‡†

### IsoSnap åˆæ ¼æ ‡å‡†

**å¿…é¡»èƒ½åšåˆ°ï¼š**
- [ ] èƒ½ç”»å‡ºå®Œæ•´ bathroom group isometricï¼ˆWC + lav + ventï¼‰
- [ ] æ‰€æœ‰ç®¡çœŸå®è¿æ¥ï¼ˆæ•°æ®å±‚é¢ï¼Œä¸æ˜¯è§†è§‰ï¼‰
- [ ] å¯ä»¥æ•´ä½“ä¿®æ”¹ï¼ˆæ‹–åŠ¨èŠ‚ç‚¹ã€æ¡†é€‰ç§»åŠ¨ï¼‰
- [ ] ä¸éœ€è¦é‡ç”»
- [ ] å¯¼å‡ºå Inspector èƒ½çœ‹æ‡‚

**æŠ€æœ¯æŒ‡æ ‡ï¼š**
- [ ] èŠ‚ç‚¹æ•æ‰å‡†ç¡®ï¼ˆ15px å†…ï¼‰
- [ ] ä¸‰æ–¹å‘é”å®šæ­£ç¡®
- [ ] Undo/Redo è‡³å°‘ 20 æ­¥
- [ ] 60fps æ¸²æŸ“ï¼ˆ50-200 æ¡çº¿æ®µï¼‰

---

### PlanSnap åˆæ ¼æ ‡å‡†

**å¿…é¡»èƒ½åšåˆ°ï¼š**
- [ ] èƒ½ç”»å®Œæ•´ 2D layoutï¼ˆè‡³å°‘ä¸€ä¸ªæˆ¿é—´ï¼‰
- [ ] èƒ½æ‹–ã€æ”¹ã€ä¸å´©
- [ ] Grid å¯¹é½æ­£å¸¸
- [ ] å¯¼å‡ºå¯ç»™å®¢æˆ·è§£é‡Š

**æŠ€æœ¯æŒ‡æ ‡ï¼š**
- [ ] å¢™å¯ä»¥æ‹‰ä¼¸
- [ ] å¯¹é½è¾…åŠ©çº¿å‡†ç¡®
- [ ] æ¡†é€‰æµç•…
- [ ] 60fps æ¸²æŸ“

---

### å…±äº«åŸºç¡€è®¾æ–½åˆæ ¼æ ‡å‡†

- [ ] PWA å¯ä»¥å®‰è£…åˆ°ä¸»å±å¹•
- [ ] ç¦»çº¿å¯ä»¥æ‰“å¼€
- [ ] IndexedDB å­˜å‚¨ç¨³å®š
- [ ] PNG/PDF å¯¼å‡ºæ¸…æ™°
- [ ] ä¸¤ä¸ªäº§å“å®Œå…¨ç‹¬ç«‹è¿è¡Œ

---

## â±ï¸ Sprint 1 æ—¶é—´è¡¨

### Week 1ï¼ˆ5å¤©ï¼‰

| æ—¥æœŸ | ä»»åŠ¡ | è´Ÿè´£äºº |
|------|------|--------|
| Day 1 | A1: æ¶æ„æ­å»º | CTO |
| Day 2 | A2: Canvas å¼•æ“ + A3: å­˜å‚¨ | CTO |
| Day 3 | A4: å¯¼å‡ºå¼•æ“ + B1: IsoSnap æ•°æ®æ¨¡å‹ | CTO |
| Day 4 | B2: IsoSnap ç»˜åˆ¶é€»è¾‘ï¼ˆPart 1ï¼‰ | CTO |
| Day 5 | B2: IsoSnap ç»˜åˆ¶é€»è¾‘ï¼ˆPart 2ï¼‰ | CTO |

---

### Week 2ï¼ˆ5å¤©ï¼‰

| æ—¥æœŸ | ä»»åŠ¡ | è´Ÿè´£äºº |
|------|------|--------|
| Day 6 | B3: IsoSnap ç¼–è¾‘èƒ½åŠ›ï¼ˆPart 1ï¼‰ | CTO |
| Day 7 | B3: IsoSnap ç¼–è¾‘èƒ½åŠ›ï¼ˆPart 2ï¼‰ + B4: è§†è§‰åé¦ˆ | CTO |
| Day 8 | B5: Fixture + C1: PlanSnap æ•°æ®æ¨¡å‹ | CTO |
| Day 9 | C2: PlanSnap ç»˜å›¾å¼•æ“ | CTO |
| Day 10 | C2: PlanSnap ç»˜å›¾å¼•æ“ï¼ˆç»­ï¼‰ | CTO |

---

### Week 3ï¼ˆå¯é€‰ï¼ŒBufferï¼‰

| æ—¥æœŸ | ä»»åŠ¡ | è´Ÿè´£äºº |
|------|------|--------|
| Day 11 | C3: PlanSnap äº¤äº’ | CTO |
| Day 12 | C4: PlanSnap å¯¼å‡º + A5: PWA | CTO |
| Day 13 | D1: ç«¯åˆ°ç«¯æµ‹è¯• | CTO |
| Day 14 | D2: å­˜å‚¨æµ‹è¯• + Bug ä¿®å¤ | CTO |
| Day 15 | æœ€ç»ˆéªŒæ”¶ + Demo å‡†å¤‡ | å…¨å‘˜ |

---

## ğŸš¨ é£é™©ä¸åº”å¯¹

### é£é™© 1ï¼šæ—¶é—´ä¸å¤Ÿ âš ï¸

**ç—‡çŠ¶ï¼š** Week 2 ç»“æŸè¿˜æ²¡å®Œæˆ IsoSnap

**åº”å¯¹ï¼š**
- ç æ‰ PlanSnapï¼ˆå…ˆä¸“æ³¨ IsoSnapï¼‰
- æˆ–è€…ç æ‰éƒ¨åˆ†åŠŸèƒ½ï¼ˆå¦‚ Fixtureã€è§†è§‰åé¦ˆï¼‰
- å»¶é•¿åˆ° Week 3

---

### é£é™© 2ï¼šåŠŸèƒ½è”“å»¶ ğŸ”´

**ç—‡çŠ¶ï¼š** "é¡ºæ‰‹åŠ ä¸ªåŠŸèƒ½"

**åº”å¯¹ï¼š**
- ä¸¥æ ¼éµå®ˆ"ç¦æ­¢æ¸…å•"
- æ¯ä¸ª PR å¿…é¡»æ³¨æ˜å±äºå“ªä¸ªäº§å“
- CPO æ¯å¤© review ä¸€æ¬¡

---

### é£é™© 3ï¼šä¸¤ä¸ªäº§å“äº’ç›¸å½±å“ ğŸ”´

**ç—‡çŠ¶ï¼š** ä¿®æ”¹ IsoSnap å¯¼è‡´ PlanSnap å´©æºƒ

**åº”å¯¹ï¼š**
- ç¡®ä¿ /core åŒ…çš„ API ç¨³å®š
- æ¯ä¸ªäº§å“ç‹¬ç«‹æµ‹è¯•
- CI/CD è·‘ä¸¤ä¸ªäº§å“çš„æµ‹è¯•

---

## ğŸ’¬ ç»™ CTO çš„è¯ï¼ˆSprint åº•çº¿ï¼‰

### CPO çš„åº•çº¿

> **Sprint 1 çš„æˆåŠŸï¼Œä¸æ˜¯åŠŸèƒ½å¤šï¼Œè€Œæ˜¯ï¼š**  
> **"ç”»å®Œä¹‹åï¼Œè¿˜èƒ½æ”¹ï¼Œè¿˜æ•¢ç”¨ã€‚"**

---

### COO çš„æœŸå¾…

> **ä¸¤ä¸ªäº§å“éƒ½è¦èƒ½"å–"ï¼Œä¸æ˜¯èƒ½"çœ‹"ã€‚**  
> **å¯¼å‡ºçš„ PDF è¦è®©ç”¨æˆ·è§‰å¾—"å€¼ $49"ã€‚**

---

### CDO çš„æé†’

> **å…±ç”¨æŠ€æœ¯æ ˆæ˜¯ä¸ºäº†æ•ˆç‡ï¼Œä½†ä¸èƒ½ç‰ºç‰²äº§å“ç‹¬ç«‹æ€§ã€‚**  
> **æ¯å¤©é—®è‡ªå·±ï¼šè¿™ä¸ªåŠŸèƒ½å±äºå“ªä¸ªäº§å“ï¼Ÿ**

---

## âœ… Sprint 1 å®Œæˆå

### ä¸‹ä¸€æ­¥ï¼ˆSprint 2ï¼‰

- [ ] æ·»åŠ åŸºç¡€çš„ Authï¼ˆç™»å½•/æ³¨å†Œï¼‰
- [ ] é›†æˆ Stripe æ”¯ä»˜
- [ ] å‡†å¤‡ Beta æµ‹è¯•
- [ ] å¼€å§‹ PlanSnapï¼ˆå¦‚æœ Sprint 1 åªå®Œæˆäº† IsoSnapï¼‰

---

**ç‰ˆæœ¬ï¼š** v1.0  
**åˆ›å»ºæ—¶é—´ï¼š** 2026-02-02  
**Sprint Duration:** 2-3 å‘¨  
**ä¸‹æ¬¡å®¡æŸ¥ï¼š** Week 1 ç»“æŸ  

---

**CTOï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç›´æ¥æ‰§è¡Œçš„ Sprint è®¡åˆ’ã€‚æ¯å®Œæˆä¸€ä¸ª Taskï¼Œå‹¾é€‰ [ ]ï¼Œå°±èƒ½çœ‹åˆ°è¿›åº¦ã€‚ä¸“æ³¨äº"èƒ½ç”¨ã€èƒ½æ”¹ã€èƒ½å–"ï¼Œå…¶ä»–éƒ½å¯ä»¥åç»­å†è¯´ã€‚åŠ æ²¹ï¼** ğŸ’ª
