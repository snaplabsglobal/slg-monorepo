# JSS Self-Rescue Mode å®Œæ•´æŠ€æœ¯è§„æ ¼ï¼ˆCTOæ‰§è¡Œç‰ˆï¼‰

> **æ–‡æ¡£ç±»å‹ï¼š** æŠ€æœ¯è§„æ ¼ + å®æ–½æ¸…å• + äº§å“å“²å­¦  
> **å…³è”æ–‡æ¡£ï¼š** 260207_JSSç¦»çº¿åŠŸèƒ½ä¸SmartTraceå®Œæ•´æŠ€æœ¯è§„æ ¼_CTOæ‰§è¡Œç‰ˆ.md  
> **åˆ›å»ºæ—¶é—´ï¼š** 2026-02-07  
> **ä¼˜å…ˆçº§ï¼š** ğŸŸ¡ P1 - æ ¸å¿ƒåŠŸèƒ½ï¼ˆOnboardingå…³é”®è·¯å¾„ï¼‰  
> **æ‰§è¡Œäººï¼š** CTO + å‰åç«¯å›¢é˜Ÿ

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

**äº§å“å®šä½ï¼š**
> Self-Rescue Modeä¸æ˜¯"è¿ç§»å·¥å…·"ï¼Œè€Œæ˜¯"è®©contractorç¬¬ä¸€æ¬¡æŠŠè‡ªå·±çš„äººç”Ÿæ•°å­—èµ„äº§æ•´ç†æ¸…æ¥š"çš„å·¥å…·ã€‚

**æ ¸å¿ƒåŸåˆ™ï¼š**
```
é»˜è®¤ä»€ä¹ˆéƒ½ä¸åš
æ¯ä¸€æ­¥éƒ½æ˜¯"æˆ‘è‡ªå·±ç‚¹çš„"
å¤„ç†çš„æ˜¯"æˆ‘è‡ªå·±çš„ç…§ç‰‡"
```

**ä¸æ˜¯ä»€ä¹ˆï¼š**
- âŒ ä¸æ˜¯æŒ–CompanyCamå¢™è„šçš„å·¥å…·
- âŒ ä¸æ˜¯AIè‡ªåŠ¨å½’æ¡£ç³»ç»Ÿ
- âŒ ä¸æ˜¯è¿ç§»åŠ©æ‰‹

**æ˜¯ä»€ä¹ˆï¼š**
- âœ… æ˜¯contractor"æ‹¯æ•‘è‡ªå·±"çš„å·¥å…·
- âœ… æ˜¯æŠŠbashè„šæœ¬å˜æˆUIçš„å‡çº§ç‰ˆ
- âœ… æ˜¯"ç§©åºæ„Ÿä¸Šç˜¾"çš„èµ·ç‚¹

---

## ğŸ¯ äº§å“å“²å­¦ä¸è¾¹ç•Œ

### CEOçš„åŸå§‹éœ€æ±‚

**CEOåŸè¯ï¼š**
> "æˆ‘åªæƒ³æ•´ç†ç›¸å†Œï¼Œæ‹¯æ•‘è‡ªå·±ã€‚æˆ‘è‡ªå·±ä¹Ÿå†™è¿‡ä¸€äº›bashæŠŠç…§ç‰‡æ ¹æ®GPSåˆ†ç±»å½’æ¡£ã€‚"

**CPOåˆ¤æ–­ï¼š**
> è¿™ä¸æ˜¯"AIå†³å®šå†å²"ï¼Œè€Œæ˜¯ä¸€ä¸ªéå¸¸æœ´ç´ ã€éå¸¸å·¥ç¨‹å¸ˆã€éå¸¸contractorçš„éœ€æ±‚ï¼š"æˆ‘è‡ªå·±éƒ½å¿«è¢«è¿™äº›ç…§ç‰‡æç–¯äº†ï¼Œæˆ‘åªæ˜¯æƒ³æŠŠå®ƒä»¬æ•´ç†ä¸€ä¸‹ã€‚"

---

### æ­£ç¡®å®šä¹‰ï¼ˆäº§å“å®ªæ³•ï¼‰

**Self-Rescue Mode = Human-in-the-loop çš„è¯æ®æ•´ç†åŠ é€Ÿå™¨**

**ä¸‰æ¡é“å¾‹ï¼š**

**ğŸ§  é“å¾‹1ï¼šé»˜è®¤ä»€ä¹ˆéƒ½ä¸åš**
```
è¿›æ¥åªæ˜¯ï¼š
- æ‰«æ
- çœ‹
- ç†è§£

âŒ ä¸è‡ªåŠ¨æ”¹
âŒ ä¸è‡ªåŠ¨å½’æ¡£
âŒ ä¸"ç³»ç»Ÿå¸®ä½ åšä¸»"
```

**ğŸ‘† é“å¾‹2ï¼šæ¯ä¸€æ­¥éƒ½æ˜¯"æˆ‘è‡ªå·±ç‚¹çš„"**
```
åˆ†ç»„æ˜¯ï¼šå»ºè®®åˆ†ç»„
å½’æ¡£æ˜¯ï¼šä½ ç‚¹ç¡®è®¤
æ”¹é”™æ˜¯ï¼šä½ éšæ—¶èƒ½æ’¤

è¿™å’Œä½ è·‘bashè„šæœ¬çš„å¿ƒç†çŠ¶æ€æ˜¯ä¸€æ¨¡ä¸€æ ·çš„
```

**ğŸ“ é“å¾‹3ï¼šå®ƒå¤„ç†çš„æ˜¯"æˆ‘è‡ªå·±çš„ç…§ç‰‡"**
```
æ¥æºå¯ä»¥æ˜¯ï¼š
- æ‰‹æœºç›¸å†Œ
- ç¡¬ç›˜
- æ—§é¡¹ç›®å¯¼å‡º

ä½†è¯­ä¹‰æ°¸è¿œæ˜¯ï¼š
"æˆ‘åœ¨æ•´ç†æˆ‘è‡ªå·±çš„ä¸œè¥¿"

è€Œä¸æ˜¯ï¼š
"JSSåœ¨å¸®æˆ‘åˆ†æåˆ«äººçš„ç³»ç»Ÿ"
```

---

### ä¸ºä»€ä¹ˆè¿™ä¸ªæƒ³æ³•ä¼šèµ¢

**CPOåˆ†æï¼š**

**1. æŠ“åˆ°äº†è¢«å¿½ç•¥10å¹´çš„çœŸå®æ—¶åˆ»**

```
å¤§å¤šæ•°contractorçš„æ•°å­—è½¨è¿¹ï¼š

å‰å‡ å¹´ï¼š
æ‰‹æœºæ‹ã€WhatsAppä¼ ã€Dropboxä¸¢

åå‡ å¹´ï¼š
ç”¨äº†CompanyCam/å…¶ä»–å·¥å…·

ç°åœ¨ï¼š
ç›¸å†Œ = åƒåœ¾å †

ä»–ä»¬æœ€ç—›çš„é‚£ä¸€åˆ»ä¸æ˜¯"æ¢è½¯ä»¶"
è€Œæ˜¯æŸå¤©çªç„¶æ„è¯†åˆ°ï¼š
"æˆ‘è¿™åå‡ å¹´çš„å·¥åœ°ç…§ç‰‡ï¼Œå…¨ä¹±äº†ã€‚"
```

**2. "ç§©åºæ„Ÿä¸Šç˜¾"ï¼Œä¸æ˜¯å·¥å…·ç²˜æ€§**

```
ä¸€ä¸ªcontractorçœŸæ­£ä¼šçˆ±ä¸Šçš„è½¯ä»¶
ä¸æ˜¯å› ä¸ºåŠŸèƒ½å¤š

è€Œæ˜¯å› ä¸ºæŸä¸€å¤©ä»–å‘ç°ï¼š
"è¿™ä¸ªè½¯ä»¶ï¼Œè®©æˆ‘ç¬¬ä¸€æ¬¡æŠŠäº‹æƒ…ç†é¡ºäº†ã€‚"

è¿™æ˜¯ç§©åºæ„Ÿä¸Šç˜¾ï¼Œä¸æ˜¯å·¥å…·ç²˜æ€§
```

**3. CEOåŸè¯ï¼ˆ100%æˆç«‹ï¼‰ï¼š**
> "å¦‚æœcontractorä¸€å¼€å§‹å°±ç”¨JSSæŠŠè‡ªå·±ç›¸å†Œå…ˆæ‹¯æ•‘äº†ï¼Œä»¥åå·¥ä½œå˜å¾ˆæœ‰è°ƒç†ï¼Œä»–ä¸€å®šä¼šçˆ±ä¸Šæˆ‘ä»¬çš„JSS"

**CPOç¡®è®¤ï¼š**
> è¿™ä¸æ˜¯é”€å”®è½¬åŒ–ï¼Œè¿™æ˜¯è¡Œä¸ºè½¬åŒ–ã€‚

---

## ğŸ“ å®Œæ•´UIæµç¨‹ï¼ˆ5æ­¥Â·äººç±»ä¸»å¯¼ç‰ˆï¼‰

### å®šä½ä¸€å¥è¯

```
Self-Rescue Mode helps you organize your own photos
â€” nothing changes unless you confirm.
```

---

### Step 0ï½œå…¥å£ï¼ˆä¸æ˜¯åŠŸèƒ½ï¼Œæ˜¯ä¸€ç§"æ¨¡å¼"ï¼‰

**å…¥å£ä½ç½®ï¼ˆéå¸¸é‡è¦ï¼‰ï¼š**

```
âŒ ä¸è¦è—åœ¨Settings
âŒ ä¸è¦å†™æˆImport Tool

âœ… æ”¾åœ¨onboarding/é¦–é¡µæ˜¾çœ¼ä½ç½®ï¼š

"Rescue your photo library"
Get your past under control before starting fresh.
```

**å¿ƒç†æš—ç¤ºï¼š**
> è¿™æ˜¯ä½ ä¸ºè‡ªå·±åšçš„ä¸€ä»¶äº‹ï¼Œä¸æ˜¯"è¿ç§»å·¥å…·"ï¼Œä¸æ˜¯"åˆ†æåˆ«äººçš„ç³»ç»Ÿ"

---

### Step 1ï½œé€‰æ‹©"æˆ‘è‡ªå·±çš„ç…§ç‰‡æ¥æº"

**UIæ–‡æ¡ˆï¼ˆä¸€å®šè¦å…‹åˆ¶ï¼‰ï¼š**

```
Where are your photos coming from?

â˜ Phone / Camera Roll
â˜ Local folder (zip / drag & drop)
â˜ External drive
â˜ Exported project folders

We don't connect to other apps.
You choose what to bring in.
```

**ğŸ”’ ä¿¡ä»»ç‚¹ï¼š**

```
æ˜ç¡®å†™ï¼š
"JSS never logs into other apps or systems."

è¿™ä¸€æ­¥å°±æŠŠä½ å’ŒCOOçš„
"CompanyCamè…¹åœ°"å½»åº•åˆ‡å¼€äº†
```

---

### Step 2ï½œåªåšä¸€ä»¶äº‹ï¼šæ‰«æ & çœ‹æ¸…

**ç”»é¢ç»“æ„ï¼š**

```
å·¦è¾¹ï¼šè¿›åº¦æ¡
å³è¾¹ï¼šå®æ—¶ç»Ÿè®¡ï¼ˆéå¸¸çˆ½ï¼‰

Scanning your photosâ€¦

3,482 photos found
2,917 with GPS
565 without location
Date range: 2019 â€“ 2025
```

**ğŸ“Œ é‡è¦è§„åˆ™ï¼š**

```
ä¸å‡ºç°ä»»ä½•ï¼š
- é¡¹ç›®å
- å½’å±åˆ¤æ–­
- "ç³»ç»Ÿè®¤ä¸º"

åªæ˜¯åœ¨å›ç­”ä¸€ä¸ªé—®é¢˜ï¼š
"æˆ‘åˆ°åº•æœ‰å¤šå°‘ä¸œè¥¿ï¼Ÿ"

è¿™æ˜¯ç¬¬ä¸€å±‚"ç§©åºæ„Ÿ"
```

---

### Step 3ï½œå»ºè®®åˆ†ç»„ï¼ˆä½†ä¸å«"å½’æ¡£"ï¼‰

**UIæ ‡é¢˜ï¼ˆå…³é”®ï¼‰ï¼š**

```
Suggested groups (nothing applied yet)
```

**å‰¯æ ‡é¢˜ä¸€å®šè¦å†™æ¸…æ¥šï¼š**

```
These are suggestions based on location & time.
Review them before doing anything.
```

**åˆ†ç»„æ–¹å¼ï¼ˆå’Œbashä¸€æ¨¡ä¸€æ ·ï¼‰ï¼š**

```
æ¯ä¸€ç»„æ˜¾ç¤ºä¸ºï¼š

Group A
ğŸ“ West 41st Ave area
ğŸ•’ Janâ€“Mar 2023
ğŸ“· 186 photos

ã€Previewã€‘
```

**ç‚¹Previewè¿›å»ï¼š**
- ç…§ç‰‡æ—¶é—´çº¿
- åœ°å›¾å°ç‚¹ï¼ˆä¸æ˜¯é¡¹ç›®ï¼‰
- æ²¡æœ‰ä»»ä½•"è¿™æ˜¯æŸæŸé¡¹ç›®"çš„å¼ºè¯´æ³•

**ğŸ“Œ è¿™é‡Œç³»ç»Ÿåªè¯´äº‹å®ï¼š**
- åœ°ç‚¹ç›¸è¿‘
- æ—¶é—´è¿ç»­
- ä¸å‘½åã€ä¸ä¸‹ç»“è®º

---

### Step 4ï½œä½ æ¥å‘½åï¼Œä½ æ¥å†³å®š

**è¿™æ˜¯çµé­‚æ­¥éª¤**

**UIæ–‡æ¡ˆï¼š**

```
What do you want to do with this group?
```

**æŒ‰é’®åªæœ‰ä¸‰ç§ï¼š**

```
ã€Name this projectã€‘
ã€Keep unassigned for nowã€‘
ã€Skip this groupã€‘
```

**å¦‚æœç‚¹Name this projectï¼š**
- è¾“å…¥æ¡†ï¼ˆä½ æ‰“å­—ï¼‰
- å¯é€‰ï¼šåœ°å€/å®¢æˆ·å
- ç³»ç»Ÿä¸è‡ªåŠ¨å¡«

**ğŸ§  å¿ƒç†å˜åŒ–å‘ç”Ÿåœ¨è¿™é‡Œï¼š**
> "å“¦ï¼Œè¿™æ˜¯æˆ‘è‡ªå·±åœ¨å»ºç«‹ç§©åºã€‚"

**è¿™ä¸€æ­¥ï¼Œæ˜¯ownershipçš„è¯ç”Ÿç‚¹**

---

### Step 5ï½œç¡®è®¤æ‰§è¡Œï¼ˆæœ€åä¸€é“é—¸ï¼‰

**æœ€ç»ˆç¡®è®¤é¡µï¼ˆä¸€å®šè¦æœ‰ï¼‰ï¼š**

**æ ‡é¢˜è¦éå¸¸ç›´ç™½ï¼š**

```
You're about to organize your photos
```

**åˆ—æ¸…æ¥šï¼š**

```
4 groups will be named as projects
1,240 photos will be organized
0 photos will be deleted
```

**åº•éƒ¨ä¸€å¥è¯ï¼ˆå¿…é¡»å†™ï¼‰ï¼š**

```
Nothing changes until you click Confirm.
```

**æŒ‰é’®ï¼š**
```
ã€Confirm & applyã€‘
ã€Go backã€‘
```

**ğŸ“Œ æ‰§è¡Œæ—¶ç»™ä¸€ä¸ªæ˜æ˜¾çš„åŠ¨ç”»/è¿›åº¦**
> è®©ç”¨æˆ·"æ„Ÿå—åˆ°è¿™ä»¶äº‹å‘ç”Ÿäº†"

---

### æ•´ä¸ªæµç¨‹çš„ä¸‰æ¡"æŠ¤åŸæ²³è§„åˆ™"

**ğŸ›‘ Rule 1ï¼šä»»ä½•ä¸€æ­¥éƒ½å¯ä»¥åœ**
```
- å…³é¡µé¢
- ä¸‹æ¬¡å†æ¥
- ä¸ä¼šåŠè‡ªåŠ¨å®Œæˆ
```

**ğŸ›‘ Rule 2ï¼šç³»ç»Ÿæ°¸è¿œä¸"æ›¿ä½ å‘½å"**
```
- é¡¹ç›®å = äººç±»è¾“å…¥
- åœ°å€ = å¯é€‰
- ç³»ç»Ÿä¸çŒœå®¢æˆ·æ˜¯è°
```

**ğŸ›‘ Rule 3ï¼šè¿™æ˜¯ä¸€æ¬¡"æ•´ç†"ï¼Œä¸æ˜¯"è¿ç§»"**
```
- ä¸è®²ç«å“
- ä¸è®²æ¬å®¶
- ä¸è®²æ›¿æ¢

ä½ æ˜¯åœ¨æ•´ç†ä½ çš„äººç”Ÿç…§ç‰‡
ä¸æ˜¯åœ¨åˆ‡æ¢è½¯ä»¶
```

---

## ğŸ”§ åœ°å€åå‘è§£æé¢„å¡«åï¼ˆCOOå»ºè®®çš„æ­£ç¡®å®ç°ï¼‰

### COOçš„å»ºè®®

**åŸæ–‡ï¼š**
> "æ‰‹å·¥èµ·åçš„ç—›ç‚¹ä¼˜åŒ–ï¼šå¦‚æœå¸ˆå‚…æ‰‹æœºé‡Œæœ‰5ä¸ªå·¥åœ°ï¼Œæ¯æ¬¡éƒ½è¦æ‰‹æ‰“åå­—å¾ˆç—›è‹¦ã€‚å»ºè®®å¼•å…¥'åœ°å€åå‘è§£æ'ã€‚æ•ˆæœï¼šæ™ºè¸ªç®—å‡ºåæ ‡åï¼Œç›´æ¥åœ¨èµ·åå¤„é¢„å¡«å…¥'Burnaby - 4500 Kingsway'è¿™æ ·çš„åœ°å€ã€‚å¸ˆå‚…å¦‚æœè§‰å¾—å¯¹ï¼Œç‚¹ä¸€ä¸‹å°±è¡Œï¼›æƒ³æ”¹å†æ‰‹å·¥æ”¹ã€‚"

---

### CPOå®šæ€§

**âœ… å¯ä»¥åšï¼Œè€Œä¸”æ˜¯"äººæ€§åŒ–ä¼˜åŒ–"**

**å…³é”®è¾¹ç•Œï¼š**

```
åœ°å€åå‘è§£æ â†’ é¢„å¡«"å»ºè®®åç§°"
âœ”ï¸ å¯ä»¥åš
âœ”ï¸ è€Œä¸”æ˜¯"äººæ€§åŒ–ä¼˜åŒ–"
âŒ ä¸æ˜¯è‡ªåŠ¨å‘½å
âŒ ä¸æ˜¯ç³»ç»Ÿå†³å®š

"ç³»ç»Ÿä¸èƒ½æ›¿äººä¸‹ç»“è®ºï¼Œåªèƒ½é™ä½äººçš„æ“ä½œæˆæœ¬"

åœ°å€é¢„å¡«æ˜¯"é™ä½è¾“å…¥æˆæœ¬"ï¼Œä¸æ˜¯"æ›¿ä½ å‘½å"
è¿™å’ŒSmart Traceçš„"å»ºè®®è€Œéå†³å®š"æ˜¯å®Œå…¨åŒä¸€ç±»è¡Œä¸º
```

---

### UIå®ç°ï¼ˆç²¾ç»†äº¤äº’ï¼‰

**UIæ ‡é¢˜ï¼ˆä¸€å®šè¦è¿™æ ·å†™ï¼‰ï¼š**

```
Name this group (suggestion below)
```

**å‰¯æ ‡é¢˜ï¼š**

```
This is just a suggestion based on location.
You can change it.
```

**è¾“å…¥æ¡†è¡Œä¸ºï¼ˆé‡ç‚¹ï¼‰ï¼š**

```
[ Burnaby â€“ 4500 Kingsway ]  â† é¢„å¡«ï¼ˆå¯ç¼–è¾‘ï¼‰
```

**è§„åˆ™éå¸¸å…³é”®ï¼š**

**âœ… åˆæ³•è¡Œä¸ºï¼š**
- ç³»ç»Ÿé¢„å¡«åœ°å€å­—ç¬¦ä¸²
- ç”¨æˆ·ï¼šç›´æ¥æŒ‰Enterï¼ˆæ¥å—ï¼‰ã€ä¿®æ”¹éƒ¨åˆ†ã€å…¨åˆ é‡å†™

**âŒ æ˜ç¡®ç¦æ­¢ï¼š**
- è‡ªåŠ¨è·³è¿‡å‘½å
- è‡ªåŠ¨ç¡®è®¤
- æ²¡äººç±»è¾“å…¥å°±è¿›å…¥ä¸‹ä¸€æ­¥

---

### äº¤äº’çŠ¶æ€æœºï¼ˆå‘½åå•ç»„ï¼‰

```typescript
enum NamingState {
  EMPTY,              // å°šæœªå¤„ç†
  SUGGESTED_SHOWN,    // å±•ç¤ºé¢„å¡«å»ºè®®
  USER_EDITING,       // ç”¨æˆ·ä¿®æ”¹ä¸­
  USER_CONFIRMED,     // ç”¨æˆ·ç¡®è®¤
  SKIPPED             // ç”¨æˆ·é€‰æ‹©è·³è¿‡
}
```

**è¿ç§»é€»è¾‘ï¼š**

```
EMPTY
  â†’ SUGGESTED_SHOWN
    â†’ USER_CONFIRMED   (ç›´æ¥æ¥å—)
    â†’ USER_EDITING â†’ USER_CONFIRMED
    â†’ SKIPPED
```

**ğŸ“Œ åªæœ‰USER_CONFIRMEDï¼š**
- æ‰å…è®¸å†™userProjectName
- æ‰ç®—è¿™ä¸ªgroup"å®Œæˆ"

---

## ğŸ’» åç«¯æ¨¡å—è®¾è®¡ï¼ˆGPS/æ—¶é—´èšç±»ï¼‰

### ç›®æ ‡

```
æŠŠä¸€å †ç…§ç‰‡æŒ‰"åœ°ç‚¹ç›¸è¿‘ + æ—¶é—´è¿ç»­"åˆ†æˆè‹¥å¹²ç»„ï¼ˆgroupsï¼‰
åªè¾“å‡ºå»ºè®®ï¼Œä¸åšä»»ä½•å½’æ¡£å†³å®š
```

---

### è¾“å…¥/è¾“å‡ºå¥‘çº¦

**è¾“å…¥ï¼ˆæœ€å°ï¼‰ï¼š**

```typescript
type RescuePhoto = {
  photoId: string
  takenAtUtc: string  // ISO
  lat?: number
  lng?: number
  accuracyM?: number  // optional
}
```

**è¾“å‡ºï¼ˆå»ºè®®åˆ†ç»„ï¼‰ï¼š**

```typescript
type PhotoGroupSuggestion = {
  groupId: string
  photoIds: string[]
  centroid: { lat: number; lng: number }
  dateRange: { start: string; end: string }
  stats: {
    count: number
    gpsCount: number
    noGpsCount: number
    spanMinutes: number
  }
  suggestedAddress?: {
    formatted: string
    source: "reverse_geocode"
    confidence: "low" | "medium"
  }
}
```

---

### æ ¸å¿ƒåŸåˆ™ï¼ˆCEOçš„bashç²¾ç¥ï¼‰

```
âœ… ä¸è¿½æ±‚å®Œç¾å½’ç±»
   å®å¯å¤šåˆ†å‡ ç»„ï¼Œä¹Ÿåˆ«æŠŠä¸åŒå·¥åœ°æ··ä¸€èµ·

âœ… äººç±»ä¸»å¯¼
   ç»„åªæ˜¯å»ºè®®ï¼Œç”¨æˆ·å‘½åç¡®è®¤æ‰æˆç«‹

âœ… ç¨³å®šå¯è§£é‡Š
   æ¯ç»„èƒ½è§£é‡Š"ä¸ºä»€ä¹ˆå½’åœ¨ä¸€èµ·"
   ï¼ˆè·ç¦»é˜ˆå€¼/æ—¶é—´é˜ˆå€¼ï¼‰
```

---

### èšç±»ä¸¤é˜¶æ®µï¼ˆæ¨èï¼‰

**Stage Aï¼šåœ°ç‚¹èšç±»ï¼ˆLocation Clusteringï¼‰**

**ç®—æ³•é€‰æ‹©ï¼š** DBSCANï¼ˆåœ°ç†è·ç¦»ï¼‰

**ä¼˜ç‚¹ï¼š**
- ä¸ç”¨é¢„å…ˆçŸ¥é“æœ‰å‡ ä¸ªå·¥åœ°
- å¯¹contractorçš„"å‡ ä¸ªå·¥åœ°"å¤©ç„¶åŒ¹é…

**å‚æ•°å»ºè®®ï¼š**
```
eps = 80m     // å®¤å†…æ¼‚ç§» + åŒä¸€ç‰©ä¸šèŒƒå›´
minPts = 6    // å°‘äº6å¼ çš„æ•£ç‚¹å®¹æ˜“æ˜¯è·¯ä¸Š/æ‚æ‹
```

**è·ç¦»è®¡ç®—ï¼š** Haversineï¼ˆçƒé¢è·ç¦»ï¼‰

---

**Stage Bï¼šæ—¶é—´åˆ‡åˆ†ï¼ˆTemporal Segmentationï¼‰**

**è§„åˆ™ï¼š**
- åŒä¸€åœ°ç‚¹ç°‡é‡Œï¼ŒæŒ‰æ—¶é—´"æ–­å±‚"åˆ‡åˆ†æˆå¤šä¸ªç»„
- é˜²æ­¢åŒä¸€åœ°å€è·¨æœˆæ‹æ‘„è¢«æ··åœ¨ä¸€èµ·

**å‚æ•°å»ºè®®ï¼š**
```
gapMinutes = 12 * 60  // 12å°æ—¶

åŒä¸€å¤©å¤šæ¬¡è¿›å‡ºå·¥åœ°ä»ç„¶ä¼šåœ¨ä¸€èµ·
è·¨å¤©/éš”å‘¨çš„ï¼Œå¾ˆå¯èƒ½æ˜¯ä¸åŒé˜¶æ®µï¼Œæ‹†å¼€æ›´å¥½review
```

**è¾“å‡ºï¼š**
```
(locationClusterId + segmentIndex) => groupId
```

---

### æ²¡æœ‰GPSçš„ç…§ç‰‡æ€ä¹ˆåŠï¼ˆåˆ«ä¸¢æ‰ï¼ï¼‰

**åˆ†ä¸‰ç±»å¤„ç†ï¼š**

**1. noGPS but has takenAtï¼š**
```
å¦‚æœç”¨æˆ·åœ¨æŸå¤©åªæœ‰ä¸€ä¸ªä¸»è¦cluster
ä¸”noGPSç…§ç‰‡æ—¶é—´è½åœ¨è¯¥clusterçš„æ—¶é—´çª—é™„è¿‘ï¼ˆÂ±30minï¼‰
å¯ä»¥æ ‡è®°ä¸º"å¯é™„åŠ å»ºè®®"

ä½†ä»ç„¶ä¸è¦è‡ªåŠ¨åŠ å…¥ç»„ï¼Œåªåšæç¤º
```

**2. å®Œå…¨æ— ä¿¡æ¯ï¼ˆæ— GPSã€æ—¶é—´å¼‚å¸¸ï¼‰ï¼š**
```
è¿›å…¥"Unlocated / Needs review"ç»„
```

**3. GPSæä¸å¯ä¿¡ï¼ˆaccuracyå¾ˆå¤§/0,0/outlierï¼‰ï¼š**
```
å½“ä½œnoGPS
```

**è¿™ä¸€æ­¥æ˜¯"è¯æ®å¯ä¿¡åº¦"å™äº‹çš„ä¸€éƒ¨åˆ†ï¼š**
> ç³»ç»Ÿå®å¯è¯´"ä¸çŸ¥é“"

---

### Reverse Geocodingï¼ˆåœ°å€é¢„å¡«åï¼‰

**åªå¯¹æ¯ä¸ªgroupçš„centroidè°ƒä¸€æ¬¡åå‘è§£æï¼ˆèŠ‚çœæˆæœ¬ï¼‰ï¼š**

```typescript
è¿”å›formattedï¼Œä¾‹å¦‚ï¼š
"Burnaby â€“ 4500 Kingsway"

confidenceåªèƒ½æ˜¯low/medium
ï¼ˆPhase 1ä¸è¦"high"ï¼Œé¿å…"æ›¿ä½ å†³å®š"çš„è¯­ä¹‰ï¼‰

ä¸¥æ ¼ç¼“å­˜ï¼š
(roundedLatLng) -> address

roundedåˆ°5ä½å°æ•°ï¼ˆçº¦1mçº§åˆ«ï¼‰
æˆ–4ä½ï¼ˆçº¦11mï¼‰
```

---

### APIè®¾è®¡ï¼ˆæœ€å°3ä¸ªæ¥å£ï¼‰

**1) åˆ›å»ºrescue session**
```
POST /api/rescue/sessions
è¿”å›ï¼šsessionId
```

**2) ä¸Šä¼ ç…§ç‰‡å…ƒæ•°æ®/ç´¢å¼•ï¼ˆä¸ç”¨å…ˆä¼ å›¾ï¼‰**
```
POST /api/rescue/sessions/{sessionId}/photos
body: RescuePhoto[]
```

**3) ç”Ÿæˆå»ºè®®åˆ†ç»„**
```
POST /api/rescue/sessions/{sessionId}/suggest-groups
returns: PhotoGroupSuggestion[]
```

**æ³¨æ„ï¼š**
> è¿™ä¸€æ­¥åªå¤„ç†metadataï¼Œä¸ç¢°SnapEvidenceçš„æ‹ç…§ä¸Šä¼ ç®¡çº¿ï¼Œé¿å…æ±¡æŸ“Phase 1æ ¸å¿ƒ

---

## ğŸ“ å®Œæ•´TypeScriptå®ç°ï¼ˆå¯ç›´æ¥ç”¨ï¼‰

### æ–‡ä»¶ï¼šrescueClustering.ts

```typescript
/* rescueClustering.ts
   Self-Rescue Mode: GPS/time clustering suggestions
   - Offline/online irrelevant: operates on metadata only
   - Outputs suggestions; does NOT auto-assign or name
*/

export type RescuePhoto = {
  photoId: string;
  takenAtUtc: string; // ISO string
  lat?: number;
  lng?: number;
  accuracyM?: number; // optional
};

export type ClusterConfig = {
  epsMeters: number;        // e.g. 80
  minPts: number;           // e.g. 6
  gapMinutes: number;       // e.g. 12*60
  maxAccuracyM?: number;    // optional: treat worse as "noGPS"
};

export type PhotoGroupSuggestion = {
  groupId: string;
  photoIds: string[];
  centroid: { lat: number; lng: number };
  dateRange: { start: string; end: string };
  stats: {
    count: number;
    gpsCount: number;
    noGpsCount: number;
    spanMinutes: number;
  };
};

type GeoPoint = { lat: number; lng: number };

// -------------------- utils --------------------

export function isValidLatLng(lat: number, lng: number): boolean {
  if (!Number.isFinite(lat) || !Number.isFinite(lng)) return false;
  if (lat < -90 || lat > 90) return false;
  if (lng < -180 || lng > 180) return false;
  // Reject common bogus values
  if (lat === 0 && lng === 0) return false;
  return true;
}

export function parseTimeMs(iso: string): number {
  const t = Date.parse(iso);
  if (!Number.isFinite(t)) throw new Error(`Invalid takenAtUtc: ${iso}`);
  return t;
}

export function minutesDiff(aIso: string, bIso: string): number {
  const a = parseTimeMs(aIso);
  const b = parseTimeMs(bIso);
  return Math.abs(b - a) / 60000;
}

export function spanMinutes(photos: RescuePhoto[]): number {
  if (photos.length <= 1) return 0;
  let min = Infinity;
  let max = -Infinity;
  for (const p of photos) {
    const t = parseTimeMs(p.takenAtUtc);
    if (t < min) min = t;
    if (t > max) max = t;
  }
  return (max - min) / 60000;
}

export function dateRange(photos: RescuePhoto[]): { start: string; end: string } {
  let minT = Infinity;
  let maxT = -Infinity;
  let minIso = photos[0]?.takenAtUtc ?? new Date(0).toISOString();
  let maxIso = minIso;

  for (const p of photos) {
    const t = parseTimeMs(p.takenAtUtc);
    if (t < minT) {
      minT = t;
      minIso = p.takenAtUtc;
    }
    if (t > maxT) {
      maxT = t;
      maxIso = p.takenAtUtc;
    }
  }
  return { start: minIso, end: maxIso };
}

export function centroid(photos: RescuePhoto[]): GeoPoint {
  // mean of lat/lng (good enough at neighborhood scale)
  let sumLat = 0;
  let sumLng = 0;
  let n = 0;

  for (const p of photos) {
    if (typeof p.lat !== "number" || typeof p.lng !== "number") continue;
    sumLat += p.lat;
    sumLng += p.lng;
    n += 1;
  }
  if (n === 0) throw new Error("Cannot compute centroid: no GPS points");
  return { lat: sumLat / n, lng: sumLng / n };
}

// Haversine distance in meters
export function haversineMeters(a: GeoPoint, b: GeoPoint): number {
  const R = 6371000; // meters
  const toRad = (deg: number) => (deg * Math.PI) / 180;

  const dLat = toRad(b.lat - a.lat);
  const dLng = toRad(b.lng - a.lng);

  const lat1 = toRad(a.lat);
  const lat2 = toRad(b.lat);

  const sinDLat = Math.sin(dLat / 2);
  const sinDLng = Math.sin(dLng / 2);

  const h =
    sinDLat * sinDLat +
    Math.cos(lat1) * Math.cos(lat2) * (sinDLng * sinDLng);

  return 2 * R * Math.asin(Math.min(1, Math.sqrt(h)));
}

// deterministic-ish id for groups (ok for suggestion IDs)
export function makeGroupId(prefix = "grp"): string {
  return `${prefix}_${Date.now().toString(36)}_${Math.random().toString(36).slice(2, 8)}`;
}

// -------------------- DBSCAN --------------------

type DbscanLabel = 0 | 1 | 2; // 0=unvisited, 1=noise, 2=clustered

function regionQuery(
  points: RescuePhoto[],
  idx: number,
  epsMeters: number
): number[] {
  const p = points[idx];
  const out: number[] = [];
  const a = { lat: p.lat as number, lng: p.lng as number };

  for (let j = 0; j < points.length; j++) {
    if (j === idx) continue;
    const q = points[j];
    const b = { lat: q.lat as number, lng: q.lng as number };
    const d = haversineMeters(a, b);
    if (d <= epsMeters) out.push(j);
  }
  return out;
}

/**
 * DBSCAN clustering for geo points.
 * Returns array of clusters, each cluster is array of indices into the 'points' array.
 * Noise points are excluded (returned as separate array via .noiseIndices)
 */
export function dbscanGeo(
  points: RescuePhoto[],
  cfg: { epsMeters: number; minPts: number }
): { clusters: number[][]; noiseIndices: number[] } {
  const { epsMeters, minPts } = cfg;

  const labels: DbscanLabel[] = new Array(points.length).fill(0);
  const clusterIdOf: number[] = new Array(points.length).fill(-1);
  const clusters: number[][] = [];

  let clusterId = 0;

  for (let i = 0; i < points.length; i++) {
    if (labels[i] !== 0) continue; // already processed
    labels[i] = 1; // mark as noise tentatively

    const neighbors = regionQuery(points, i, epsMeters);
    // In DBSCAN, minPts typically includes the point itself
    if (neighbors.length + 1 < minPts) {
      // remains noise
      continue;
    }

    // create new cluster
    clusters.push([]);
    const queue = [i, ...neighbors];
    labels[i] = 2;
    clusterIdOf[i] = clusterId;

    while (queue.length) {
      const curr = queue.shift() as number;

      if (labels[curr] === 1) {
        // previously noise, now becomes part of cluster
        labels[curr] = 2;
        clusterIdOf[curr] = clusterId;
      }
      if (labels[curr] !== 2) {
        labels[curr] = 2;
        clusterIdOf[curr] = clusterId;
      }

      const currNeighbors = regionQuery(points, curr, epsMeters);
      if (currNeighbors.length + 1 >= minPts) {
        for (const nIdx of currNeighbors) {
          if (labels[nIdx] === 0 || labels[nIdx] === 1) {
            queue.push(nIdx);
          }
        }
      }
    }

    // materialize cluster indices
    const clusterIndices: number[] = [];
    for (let k = 0; k < clusterIdOf.length; k++) {
      if (clusterIdOf[k] === clusterId) clusterIndices.push(k);
    }
    clusters[clusterId] = clusterIndices;
    clusterId++;
  }

  const noiseIndices: number[] = [];
  for (let i = 0; i < labels.length; i++) {
    if (labels[i] === 1) noiseIndices.push(i);
  }

  return { clusters, noiseIndices };
}

// -------------------- temporal split --------------------

/**
 * Split a set of photos (already close in location) into segments by time gaps.
 * - Sorts by takenAtUtc ascending
 * - Splits when gap between adjacent photos > gapMinutes
 */
export function temporalSplit(
  photos: RescuePhoto[],
  gapMinutes: number
): RescuePhoto[][] {
  if (photos.length === 0) return [];
  const sorted = [...photos].sort(
    (a, b) => parseTimeMs(a.takenAtUtc) - parseTimeMs(b.takenAtUtc)
  );

  const groups: RescuePhoto[][] = [];
  let current: RescuePhoto[] = [];

  for (const p of sorted) {
    if (current.length === 0) {
      current.push(p);
      continue;
    }
    const prev = current[current.length - 1];
    const gap = minutesDiff(prev.takenAtUtc, p.takenAtUtc);
    if (gap > gapMinutes) {
      groups.push(current);
      current = [p];
    } else {
      current.push(p);
    }
  }
  if (current.length) groups.push(current);
  return groups;
}

// -------------------- top-level suggestions --------------------

export function suggestGroups(
  allPhotos: RescuePhoto[],
  config: ClusterConfig
): {
  groups: PhotoGroupSuggestion[];
  unlocatedPhotoIds: string[];
  noiseGpsPhotoIds: string[];
} {
  const { epsMeters, minPts, gapMinutes, maxAccuracyM } = config;

  const gps: RescuePhoto[] = [];
  const unlocated: RescuePhoto[] = [];

  for (const p of allPhotos) {
    const hasGps =
      typeof p.lat === "number" &&
      typeof p.lng === "number" &&
      isValidLatLng(p.lat, p.lng) &&
      (typeof maxAccuracyM !== "number" ||
        typeof p.accuracyM !== "number" ||
        p.accuracyM <= maxAccuracyM);

    if (hasGps) gps.push(p);
    else unlocated.push(p);
  }

  const { clusters, noiseIndices } = dbscanGeo(gps, { epsMeters, minPts });

  // build groups: temporal split per cluster
  const groupSuggestions: PhotoGroupSuggestion[] = [];
  for (const clusterIdxs of clusters) {
    const clusterPhotos = clusterIdxs.map((i) => gps[i]);
    const segments = temporalSplit(clusterPhotos, gapMinutes);

    for (const seg of segments) {
      const c = centroid(seg);
      const dr = dateRange(seg);
      const stats = {
        count: seg.length,
        gpsCount: seg.length,
        noGpsCount: 0,
        spanMinutes: spanMinutes(seg),
      };

      groupSuggestions.push({
        groupId: makeGroupId("grp"),
        photoIds: seg.map((x) => x.photoId),
        centroid: c,
        dateRange: dr,
        stats,
      });
    }
  }

  const noiseGpsPhotoIds = noiseIndices.map((i) => gps[i].photoId);
  const unlocatedPhotoIds = unlocated.map((p) => p.photoId);

  return {
    groups: groupSuggestions,
    unlocatedPhotoIds,
    noiseGpsPhotoIds,
  };
}
```

---

## ğŸ¢ åŒæ¥¼å¤šæˆ·+ä¸²é—¨å¤„ç†æ–¹æ¡ˆ

### çœŸå®åœºæ™¯ï¼ˆCEOåŸè¯ï¼‰

> "æˆ‘åœ¨ä¸€æ ‹buildingåŒä¸€å±‚æ¥¼åšäº†ä¸‰æˆ·äººå®¶è£…ä¿®ï¼ŒGPSå¯èƒ½éƒ½å½’åœ¨ä¸€èµ·ï¼Œä½†æ˜¯ä¸»è¦æ—¶é—´æ˜¯ä¸ä¸€æ ·çš„ã€‚ä½†æœ‰æ—¶å€™ä¹Ÿå›ä¸²ï¼Œæ„æ€æ˜¯æˆ‘åœ¨ç»™Aè£…ä¿®çš„æ—¶å€™ï¼ŒBè¦æˆ‘å»ä»–å®¶estimateã€‚"

---

### CPOåˆ†æ

**å…ˆæ‰¿è®¤ç°å®ï¼šGPSåœ¨åŒä¸€æ ‹æ¥¼é‡Œæ²¡æ³•åˆ†æˆ·**

```
åŒå±‚ä¸‰æˆ·ï¼ŒGPS centroidå‡ ä¹ä¸€æ ·
å®¤å†…å®šä½æ¼‚ç§»20â€“80méƒ½æ­£å¸¸

ç»“è®ºï¼š
åœ°ç†èšç±»åªè´Ÿè´£"æ¥¼/åœ°å—çº§"
ä¸è¦è¯•å›¾"åˆ†æˆ·çº§"
```

---

### æ­£ç¡®ç­–ç•¥ï¼šBuilding Bucket + Sessions + Quick Reassign

**æŠŠå¤„ç†æ‹†æˆä¸‰å±‚ï¼Œæ¯å±‚éƒ½å¾ˆ"äººç±»å‹å¥½"**

**Layer Aï¼šå…ˆèšåˆ°ä¸€ä¸ª"Building Bucket"**

```
ä½ ä¼šå¾—åˆ°ä¸€ä¸ªç»„ï¼š
"Burnaby â€“ 4500 Kingsway (Building) / 1,200 photos"

è¿™ä¸€æ­¥æ˜¯æ­£ç¡®çš„ï¼š
å…ˆæŠŠç…§ç‰‡ä»"åƒåœ¾å †"æ•‘å‡ºæ¥
è‡³å°‘å½’åˆ°"è¿™æ ‹æ¥¼"
```

**Layer Bï¼šåœ¨Bucketå†…åš"æ—¶é—´åˆ‡ç‰‡"**

```
å»ºè®®ï¼šåœ¨building bucketå†…ç”Ÿæˆwork sessionsï¼š

è§„åˆ™ï¼šç›¸é‚»ç…§ç‰‡é—´éš” > 45â€“90åˆ†é’Ÿ â†’ æ–°session

æ¯ä¸ªsessionæ˜¯ä¸€ä¸ªæ—¶é—´æ®µï¼ˆæ¯”å¦‚10:00â€“11:30ï¼‰

è¿™ä¸ä¼šè§£å†³"ä¸²é—¨"
ä½†ä¼šæŠŠæ•´ç†å·¥ä½œå˜å¾—åƒæ•´ç†è¡Œç¨‹ä¸€æ ·
```

**Layer Cï¼šè®©ç”¨æˆ·ç”¨"è¶…è½»ç¡®è®¤"æŠŠsessionå½’åˆ°A/B/C**

```
å…³é”®äº¤äº’ä¸æ˜¯è®©ä½ å‘½åæ¯å¼ å›¾
è€Œæ˜¯è®©ä½ å¯¹sessionåšä¸€æ¬¡é€‰æ‹©ï¼š

Session 10:00â€“11:30 / 58 photos
Suggested: Unit A (last used)
[A] [B] [C] [Unassigned]

ä½ ç‚¹ä¸€æ¬¡ï¼Œå…¨sessionå°±å½’è¿‡å»
```

**ä¸²é—¨æ€ä¹ˆå¤„ç†ï¼Ÿ**

```
å¦‚æœsessioné‡Œç¡®å®æ··äº†ä¸¤æˆ·
ï¼ˆæ¯”å¦‚ä½ å»Bä¼°ä»·åªæ‹äº†5å¼ ï¼‰

ä½ å°±éœ€è¦ä¸€ä¸ª"æ‹†å‡ºæ¥"çš„åŠ¨ä½œï¼š

Splitï¼ˆæ‹†åˆ†ï¼‰
æŒ‰æ—¶é—´è½´æ‹–åŠ¨é€‰åŒº / æˆ–é€‰5å¼ 
â†’ Move to Unit B

è¿™æ‰æ˜¯"çœŸå®ä¸–ç•Œ"çš„è§£æ³•ï¼š
ä¸æ˜¯è¦æ±‚ç®—æ³•å®Œç¾
è€Œæ˜¯æŠŠçº é”™æˆæœ¬å‹åˆ°å¾ˆä½
```

---

### æ•°æ®ç»“æ„è¡¥ä¸

```typescript
export type BuildingBucket = {
  bucketId: string;
  centroid?: { lat: number; lng: number };
  suggestedLabel?: string;  // "Burnaby â€“ 4500 Kingsway (Building)"
  photoIds: string[];
  
  // created by time slicing
  sessions: RescueSessionSegment[];
  
  // optional: user-defined unit list
  units?: Array<{ unitId: string; label: string }>; // e.g. A/B/C
};

export type RescueSessionSegment = {
  sessionId: string;
  photoIds: string[];
  dateRange: { start: string; end: string };
  count: number;
  
  // human decision
  assignment: {
    status: "unassigned" | "assigned";
    unitId?: string;  // A/B/C
  };
  
  // UX helper (NOT a decision)
  suggestion?: {
    type: "last_used_unit";
    unitId: string;
  };
};
```

---

### "Last Used Unit"ä½œä¸ºé»˜è®¤ï¼ˆéå¸¸çœäº‹ï¼‰

**é€»è¾‘ï¼ˆéå¸¸ç®€å•ï¼Œä½†å¾ˆçˆ½ï¼‰ï¼š**

```
ç»´æŠ¤ä¸€ä¸ªlastUsedUnitIdï¼ˆbucket scopeï¼‰

æ–°sessioné»˜è®¤suggestion = lastUsedUnitId

ç”¨æˆ·ç‚¹äº†Bï¼ŒlastUsedUnitIdç«‹å³å˜æˆB

åé¢çš„sessionç»§ç»­å»ºè®®B
```

**è¿™ä¸æ˜¯AIï¼Œè¿™æ˜¯"è®°ä½ä½ åˆšæ‰å¹²äº†å•¥"**

---

## ğŸ¯ Auto-pick Minority Photosï¼ˆå°æ ¸å¼¹çº§ä½“éªŒï¼‰

### ç›®æ ‡

```
å½“ä¸€ä¸ªsessioné‡Œå‡ºç°"Aä¸ºä¸»ï¼Œä½†æ··äº†å°‘é‡B/C/Unassigned"
ç”¨æˆ·ä¸æƒ³æ‰‹åŠ¨æ‰¾é‚£å‡ å¼ 

æˆ‘ä»¬è¦åšåˆ°ï¼š
æ‰“å¼€Review â†’ ç³»ç»Ÿé»˜è®¤å·²ç»é€‰å¥½äº†é‚£å‡ å¼ "å¼‚ç±»"
â†’ ä½ ç‚¹ä¸€æ¬¡Moveå®Œæˆ
```

**è¿™ä¸æ˜¯è‡ªåŠ¨å½’æ¡£ï¼Œå› ä¸ºï¼š**
- ç³»ç»Ÿåªé€‰ä¸­ï¼Œä¸æ‰§è¡Œ
- ä½ å¿…é¡»ç‚¹Move/Splitæ‰ä¼šç”Ÿæ•ˆ

---

### è§¦å‘æ¡ä»¶ï¼ˆå¾ˆä¿å®ˆï¼‰

**åœ¨SessionCardæ˜¾ç¤ºMixedæ—¶ï¼Œå‡ºç°ä¸€ä¸ªæŒ‰é’®ï¼š**

```
ã€Fix (5)ã€‘

æ‹¬å·æ•°å­— = "å°‘æ•°æ´¾å¼ æ•°"ï¼ˆä¾‹å¦‚5å¼ ï¼‰

ç‚¹å‡»è¿›å…¥Draweråè§¦å‘auto-pick
```

---

### å°‘æ•°æ´¾å®šä¹‰ï¼ˆç®—æ³•å¾ˆç®€å•ä½†å¾ˆæœ‰æ•ˆï¼‰

**å¯¹sessionå†…æ‰€æœ‰ç…§ç‰‡ç»Ÿè®¡å½’å±åˆ†å¸ƒï¼š**

```
A: 53
B: 5
Unassigned: 0

å¤šæ•°æ´¾ = 53å¼ çš„A
å°‘æ•°æ´¾ = 5å¼ çš„B
```

**é€‰ä¸­è§„åˆ™ï¼ˆåªé€‰å°‘æ•°æ´¾ï¼‰ï¼š**

```
å¦‚æœå­˜åœ¨æ˜ç¡®å¤šæ•°æ´¾ï¼ˆå æ¯”â‰¥70%ï¼‰ï¼š
  è‡ªåŠ¨é€‰ä¸­æ‰€æœ‰"éå¤šæ•°æ´¾"çš„ç…§ç‰‡

å¦‚æœæ²¡æœ‰æ˜ç¡®å¤šæ•°æ´¾ï¼ˆä¾‹å¦‚A 20/B 18/C 15ï¼‰ï¼š
  ä¸è‡ªåŠ¨é€‰ä¸­ä»»ä½•
  
  Draweré¡¶éƒ¨æç¤ºï¼š
  "This session is truly mixed 
   â€” please select photos manually."
```

**âœ… è¿™æ ·å°±ä¸ä¼š"è£…æ‡‚"ï¼Œä¹Ÿä¸ä¼šè¯¯å¯¼**

---

### UIè¡Œä¸º

**Draweré¡¶éƒ¨æç¤ºæ¡ï¼ˆå¿…é¡»æœ‰ï¼‰ï¼š**

```
å½“auto-pickç”Ÿæ•ˆï¼š

We selected 5 photos that don't match 
the main group (A).
Nothing will change until you move them.

æŒ‰é’®ï¼ˆå³ä¾§ï¼‰ï¼š
ã€Clear selectionã€‘
```

**è¿™å¥è¯æŠŠ"è¾¹ç•Œ"é’‰æ­»ï¼šä¸è¶Šç•Œã€ä¸æš—æ”¹**

---

### ä»£ç é€»è¾‘

```typescript
type UnitId = "A" | "B" | "C" | null; // null = Unassigned

function computeMajorityAndMinority(
  photoIds: string[], 
  photoAssignment: Record<string, UnitId>
) {
  const counts = new Map<UnitId, number>();
  for (const pid of photoIds) {
    const u = photoAssignment[pid] ?? null;
    counts.set(u, (counts.get(u) ?? 0) + 1);
  }

  // find majority
  let majorityUnit: UnitId = null;
  let majorityCount = 0;
  let total = photoIds.length;

  for (const [u, c] of counts.entries()) {
    if (c > majorityCount) {
      majorityCount = c;
      majorityUnit = u;
    }
  }

  const majorityRatio = total === 0 ? 0 : majorityCount / total;

  // Only auto-pick if majority is strong
  if (majorityRatio < 0.7) {
    return { 
      majorityUnit, 
      majorityRatio, 
      autoPick: false, 
      selected: [] as string[], 
      counts 
    };
  }

  const selected = photoIds.filter(
    pid => (photoAssignment[pid] ?? null) !== majorityUnit
  );
  
  return { 
    majorityUnit, 
    majorityRatio, 
    autoPick: true, 
    selected, 
    counts 
  };
}
```

---

## ğŸ”„ Sticky Destinationï¼ˆä¸Šæ¬¡å»å“ªï¼Œè¿™æ¬¡å…ˆæ”¾é‚£ï¼‰

### ä¸€å¥è¯å®šä¹‰

```
å½“ç³»ç»Ÿå·²ç»çŸ¥é“ä½ åˆšåˆšæŠŠ"å°‘æ•°æ´¾"ç§»åˆ°äº†å“ªä¸ªunit
ä¸‹ä¸€æ¬¡å†ä¿®Mixedï¼Œå®ƒå°±æŠŠé‚£ä¸ªunitæ”¾åœ¨ç¬¬ä¸€ä½

ä¸æ˜¯è‡ªåŠ¨ç§»åŠ¨ï¼Œåªæ˜¯æŒ‰é’®é¡ºåº + é»˜è®¤ç„¦ç‚¹
```

---

### å®ƒè§£å†³çš„çœŸå®ç—›ç‚¹

**çœŸå®çš„æ“ä½œèŠ‚å¥ï¼š**

```
Session 1ï¼š
åœ¨Aå¹²æ´» â†’ ä¸²å»Bä¼°ä»· â†’ Fix â†’ Move to B

Session 2ï¼š
è¿˜æ˜¯åœ¨Aå¹²æ´» â†’ åˆä¸²å»Bä¼°ä»· â†’ Fix â†’ è¿˜å¾—å†ç‚¹ä¸€æ¬¡B
```

**Sticky destinationçš„ç›®çš„ï¼š**
> ç¬¬äºŒæ¬¡ï¼Œä½ ä¸ç”¨å†æ‰¾Bäº†ï¼Œå®ƒå·²ç»åœ¨ä½ æ‰‹æŒ‡ä¸‹é¢

---

### è§„åˆ™éå¸¸å…‹åˆ¶

**Stickyåªåœ¨è¿™ä¸‰ç§æƒ…å†µä¸‹ç”Ÿæ•ˆï¼š**
- åŒä¸€ä¸ªBuilding Bucketå†…
- ä½ åˆšåˆšå®Œæˆäº†ä¸€æ¬¡æ˜ç¡®çš„Move/Splitæ“ä½œ
- ä¸‹ä¸€æ¬¡è¿›å…¥Mixed Fix

**Stickyä¸ä¼šç”Ÿæ•ˆçš„æƒ…å†µï¼š**
- æ–°bucketï¼ˆæ–°æ¥¼ï¼‰
- ç”¨æˆ·åˆ·æ–°é¡µé¢ï¼ˆå¯é€‰æ˜¯å¦æŒä¹…åŒ–ï¼‰
- å¤šæ•°æ´¾ä¸è¶³70%ï¼ˆç³»ç»Ÿå·²ç»é€‰æ‹©"ä¸è‡ªåŠ¨é€‰ä¸­"ï¼‰

**ä¹Ÿå°±æ˜¯è¯´ï¼š**
> å®ƒæ˜¯"é¡ºç€ä½ çš„æ‰‹èµ°"ï¼Œä¸æ˜¯"ç³»ç»Ÿè‡ªå·±æƒ³å»å“ª"

---

### UXè¡¨ç°ï¼ˆéå¸¸ä½è°ƒï¼‰

**åœ¨Fix Drawerçš„MoveToolbaré‡Œï¼š**

**åŸæ¥æŒ‰é’®é¡ºåºï¼š**
```
[A] [B] [C] [Unassigned]
```

**å½“Sticky destination = Bæ—¶ï¼š**
```
[B] [A] [C] [Unassigned]
```

**å¹¶ä¸”ï¼š**
- ç¬¬ä¸€ä¸ªæŒ‰é’®ï¼ˆBï¼‰æœ‰focus/highlight
- ä½†ä¸ä¼šè‡ªåŠ¨è§¦å‘
- ä½ ä»ç„¶å¯ä»¥ç‚¹ä»»ä½•ä¸€ä¸ª

---

### çŠ¶æ€å­˜å“ªé‡Œï¼ˆå‰ç«¯å°±å¤Ÿäº†ï¼‰

```typescript
type BucketUIState = {
  bucketId: string;
  lastUsedUnitId?: UnitId;        // ç”¨äºsessionä¸€é”®assign
  lastFixDestination?: UnitId;    // Sticky destinationä¸“ç”¨
};
```

**ä»€ä¹ˆæ—¶å€™å†™å…¥lastFixDestinationï¼š**

```typescript
function onMoveSelected(unitId: UnitId) {
  applyMove(unitId);
  bucketUI.lastFixDestination = unitId;
  bucketUI.lastUsedUnitId = unitId; // é¡ºä¾¿æ›´æ–°last used
}
```

---

## ğŸ“‹ Implementation Checklistï¼ˆå·¥ç¨‹éªŒæ”¶æ¸…å•ï¼‰

### 0. Definitions & Invariantsï¼ˆMust-haveï¼‰

**âœ… Invariantsï¼š**

```
INV-A: 
ä¸€ä¸ªphotoIdæœ€å¤šå±äº1ä¸ªsession
(photoToSession[photoId] is single-valued)

INV-B: 
ä¸€ä¸ªphotoIdæœ€å¤šæœ‰1ä¸ªunit assignment
(photoAssignment[photoId] single-valued, nullable)

INV-C: 
ä»»ä½•"suggestion"å­—æ®µæ°¸è¿œä¸ä¼šåœ¨æ²¡æœ‰æ˜ç¡®ç”¨æˆ·åŠ¨ä½œçš„æƒ…å†µä¸‹
å†™å…¥final fields
```

**âœ… UX promisesï¼ˆcopyå¿…é¡»å­˜åœ¨äºUIï¼‰ï¼š**

```
Display: "Nothing changes unless you confirm."
Display: "Suggestions only."

Confirm screenåˆ—å‡ºexactly what will change
ï¼ˆcounts, groupsï¼‰
```

---

### 1. Data Model & Storeï¼ˆFrontendï¼‰

**Core typesï¼š**

```
â˜ å®ç°BuildingBucket, RescueSessionSegment, 
  RescuePlan, UndoToken

â˜ Store tables:
  - sessionsById: Record<sessionId, {...}>
  - photoToSession: Record<photoId, sessionId>
  - photoAssignment: Record<photoId, unitId | null>
  - bucketUIState: { lastUsedUnitId?, lastFixDestination? }
```

**Derived display stateï¼š**

```
â˜ sessionDisplayState(sessionId) returns:
  - Assigned(unitId) if all photos same assignment
  - Mixed if >1 assignment exists
  - Unassigned if all null
```

---

### 2. EXIF Ingestion & Metadata Normalization

**Extract fieldsï¼š**

```
â˜ è¯»å–lat/lngä¸ºå¸¦ç¬¦å·çš„åè¿›åˆ¶ï¼ˆè¥¿ç»ä¸ºè´Ÿï¼‰

â˜ è¯»å–æ—¶é—´ä¼˜å…ˆçº§ï¼š
  DateTimeOriginal â†’ CreateDate â†’ MediaCreateDate 
  â†’ file mtime fallback

â˜ å½’ä¸€åŒ–ä¸ºtakenAtUtc
  ï¼ˆå­˜å‚¨original offsetå¦‚æœå¯ç”¨ï¼›ä½†æ¯”è¾ƒå¿…é¡»workï¼‰
```

**Validationsï¼š**

```
â˜ Reject invalid GPS (out of range / 0,0)

â˜ Optional: 
  treat accuracyM > maxAccuracyM as noGPS
```

---

### 3. Bucketingï¼ˆGeo Clusteringï¼‰- Building/Parcel Level

**Backendæˆ–frontend workerï¼š**

```
â˜ å®ç°geo clustering
  ï¼ˆDBSCANæ¨èin appï¼›grid acceptable for bash/toolï¼‰

â˜ é»˜è®¤å‚æ•°ï¼ˆconfig-drivenï¼‰ï¼š
  - epsMeters = 60â€“100
  - minPts = 6

â˜ è¾“å‡ºBuildingBucket with:
  - centroid
  - photoIds
```

**Reverse geocodeï¼ˆoptional but recommendedï¼‰ï¼š**

```
â˜ Geocode bucket centroid onlyï¼ˆä¸æ˜¯per photoï¼‰

â˜ Cache by rounded lat/lng

â˜ æš´éœ²ä¸ºbucket.suggestedLabel 
  å’Œ/æˆ– group.suggestedNameï¼ˆsuggestion onlyï¼‰
```

---

### 4. Sessionizationï¼ˆTime Slicing Inside Bucketï¼‰

**Session splitï¼š**

```
â˜ å¯¹æ¯ä¸ªbucketï¼ŒæŒ‰æ—¶é—´æ’åºphotos
  å¹¶åœ¨gap > sessionGapMinutesæ—¶split

â˜ é»˜è®¤sessionGapMinutes = 60
  ï¼ˆconfig: 45/60/90ï¼‰

â˜ åˆ›å»ºRescueSessionSegment per session:
  - dateRange
  - count
  - photoIds
  - assignment.status = unassigned
```

**Edge casesï¼š**

```
â˜ Photos without time: 
  ä¿ç•™åœ¨"NoTime" session æˆ– Unassigned bucket section
```

---

### 5. Unitsï¼ˆA/B/Cï¼‰- User-defined

**Define units flowï¼š**

```
â˜ Optional step: 
  "This building looks like multiple units. Set units?"

â˜ é»˜è®¤units: A/B/Cï¼ˆeditable labelsï¼‰

â˜ å­˜å‚¨units per bucketï¼ˆbucket.unitsï¼‰
```

---

### 6. Session-level Assignmentï¼ˆOne Tapï¼‰

**Actionsï¼š**

```
â˜ assignSession(sessionId, unitId) must:
  - Set photoAssignment[pid] = unitId for all pid in session
  - Update bucketUIState.lastUsedUnitId = unitId
  - Recompute session display state immediately
```

**UIï¼š**

```
â˜ SessionCard shows:
  - time range + count
  - current state: Assigned/Mixed/Unassigned
  - one-tap buttons A/B/C/Unassigned
```

---

### 7. Mixed Detection & Fix Flow

**Mixed detectionï¼š**

```
â˜ A session is Mixed if 
  assignments set contains >1 distinct value
```

**Fix entryï¼š**

```
â˜ SessionCard shows Fix (N) 
  where N = minorityCount if majority exists
```

---

### 8. Auto-pick Minority Photosï¼ˆSelection Onlyï¼‰

**Majority logicï¼ˆconservativeï¼‰ï¼š**

```
â˜ è®¡ç®—sessionå†…assignmentsçš„åˆ†å¸ƒ

â˜ è¯†åˆ«majority unit with max count

â˜ Only auto-pick if majorityRatio >= 0.70

â˜ If majority exists:
  - Auto-select all photos not in majority unit
  - Show banner: "Selected N photos that don't match 
    the main group. Nothing changes until you move them."

â˜ If no strong majority:
  - Do not auto-select
  - Show message: "Truly mixed â€” select photos manually."
```

**Banner controlsï¼š**

```
â˜ Button: "Clear selection"
```

---

### 9. Sticky Destinationï¼ˆBucket-scopedï¼‰

**Stateï¼š**

```
â˜ bucketUIState.lastFixDestination stored per bucket
```

**Update rulesï¼š**

```
â˜ On successful moveSelectedToUnit(unitId):
  - lastFixDestination = unitId
  - Also update lastUsedUnitId = unitId (optional but recommended)

â˜ On splitCreateNewSession(..., unitId):
  - lastFixDestination = unitId
```

**UI behaviorï¼š**

```
â˜ In Fix drawer toolbar:
  - Reorder unit buttons so lastFixDestination appears first
  - Focus/highlight first button
  - Never auto-trigger
```

**Scope & resetsï¼š**

```
â˜ Sticky is per bucketï¼ˆnever cross-bucketï¼‰

â˜ Optional: reset on page reloadï¼ˆsafe defaultï¼‰
```

---

### 10. Split & Move Mechanicsï¼ˆConsistency-criticalï¼‰

**Move selectedï¼ˆassignment onlyï¼‰ï¼š**

```
â˜ moveSelectedToUnit(photoIds, unitId):
  - Update photoAssignment for selected
  - Do not change photoToSession membership
  - Session may become Mixed â†’ OK
```

**Create new session from selectedï¼ˆmembership changeï¼‰ï¼š**

```
â˜ splitToNewSession(sourceSessionId, selectedPhotoIds):
  - Remove selected from source session's photoIds
  - Create new session with selected
  - Update photoToSession for selected â†’ new session id
  - Ensure no photo remains in both sessions
  - If source becomes empty â†’ delete or hide source session
  - Optional: auto-assign new session to a chosen unit
    (explicit user click)
```

**Guardrailsï¼š**

```
â˜ All membership mutations are atomic
  ï¼ˆsingle reducer transactionï¼‰

â˜ Add assertions in dev build: 
  no duplicate photoIds across sessions
```

---

### 11. Plan + Confirm + Apply

**Draft plan generationï¼š**

```
â˜ Build RescuePlan.actions from current session assignments:
  - For each session: 
    create_project (unit-labeled) OR keep unassigned
```

**Confirm screen must showï¼š**

```
â˜ number of buckets/sessions affected
â˜ number of photos to be organized
â˜ zero deletionsï¼ˆalwaysï¼‰
```

**Apply behaviorï¼š**

```
â˜ Apply writes organization structure only
  never mutates original files

â˜ Return UndoTokenï¼ˆvalid for 24hï¼‰
```

---

### 12. Undoï¼ˆ24hï¼‰

**Undo semanticsï¼š**

```
â˜ Undo restores organization state to pre-apply
  ï¼ˆstructure onlyï¼‰

â˜ No file deletions. No photo loss.
```

**UIï¼š**

```
â˜ After apply, show banner:
  "Rescue applied. Undo available for 24 hours."
  
  Button: Undo
```

---

### 13. QA Test Matrixï¼ˆMust Passï¼‰

**Basicï¼š**

```
â˜ NoGPS photos go to "Unlocated" bucket

â˜ Same building multi-unit results in 
  1 bucket + multiple sessions

â˜ Session one-tap assign updates all photos
```

**Mixed + Fixï¼š**

```
â˜ Mixed session with majorityâ‰¥70% 
  shows Fix(N) and auto-selects minority

â˜ Mixed session with no strong majority 
  does NOT auto-select
```

**Stickyï¼š**

```
â˜ After moving minority to B, 
  next Fix shows B firstï¼ˆsame bucket onlyï¼‰

â˜ Sticky does not carry to another bucket
```

**Splitï¼š**

```
â˜ After split, no photo exists in two sessions (INV-A)

â˜ After move, assignment is updated only for selected
```

**Apply/Undoï¼š**

```
â˜ Confirm screen accurate counts

â˜ Apply creates structure

â˜ Undo restores structure; no deletions
```

---

### 14. Loggingï¼ˆDebug-only, no PIIï¼‰

```
â˜ Log counts: 
  number of buckets/sessions, minority selection size

â˜ Log invariant checks in dev builds
  ï¼ˆduplicates / missing mappingsï¼‰
```

---

## ğŸ“ Onboardingæ–‡æ¡ˆ

### Screen 1

**English:**
```
Rescue your photo library
Get your past under control â€” before you start fresh.
```

**ä¸­æ–‡:**
```
å…ˆæŠŠç›¸å†Œæ•‘å›æ¥
æ•´ç†æ¸…æ¥šè¿‡å»ï¼Œå†å¼€å§‹æ–°çš„é¡¹ç›®ã€‚
```

---

### Screen 2

**English:**
```
Nothing changes unless you confirm
We only suggest groups based on location & time.
You name it. You decide.
```

**ä¸­æ–‡:**
```
ä½ ä¸ç‚¹ç¡®è®¤ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šæ”¹
æˆ‘ä»¬åªæŒ‰åœ°ç‚¹å’Œæ—¶é—´å»ºè®®åˆ†ç»„ã€‚
å‘½åå’Œå†³å®šéƒ½ç”±ä½ æ¥ã€‚
```

---

### Screen 3

**English:**
```
Stop anytime
Close the page and come back later.
Your progress is saved.
```

**ä¸­æ–‡:**
```
éšæ—¶åœï¼Œéšæ—¶å›æ¥
å…³æ‰é¡µé¢ä¹Ÿæ²¡å…³ç³»ã€‚
è¿›åº¦ä¼šä¿å­˜ã€‚
```

**æŒ‰é’®æ–‡æ¡ˆï¼š**
- Primary: Start Rescue
- Secondary: Not now

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

### æŠ€æœ¯æŒ‡æ ‡

```
èšç±»è¯·æ±‚æ•°ï¼šä»Nå¼  â†’ N/100ä¸ªç»„ï¼ˆèŠ‚çœ99%è¯·æ±‚ï¼‰
æ•´ç†é€Ÿåº¦ï¼šä»æ‰‹åŠ¨æ•°å°æ—¶ â†’ å‡ åˆ†é’Ÿ
ä¸²é—¨çº é”™ï¼šä»æ‰‹åŠ¨æ‰¾ç…§ç‰‡ â†’ 2ç§’å®Œæˆ
```

---

### ç”¨æˆ·ä½“éªŒ

**å…³é”®æ—¶åˆ»ï¼š**

```
ä¸€ä¸ªcontractorï¼Œå‘¨å…­æ™šä¸Š
æ‰“å¼€ç”µè„‘ï¼Œç”¨JSS Self-Rescue Mode
æŠŠè¿‡å»3å¹´çš„ç…§ç‰‡ç¬¬ä¸€æ¬¡æŒ‰é¡¹ç›®ã€æ—¶é—´ã€åœ°ç‚¹ç†æ¸…æ¥š

ç¬¬äºŒå¤©ä»–ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

ä»–ä¼šå¼€å§‹ï¼š
- ç»™æ–°é¡¹ç›®å»ºå¯¹çš„ç»“æ„
- æ‹ç…§æ›´è‡ªè§‰
- è¯æ®æ›´æœ‰æ„è¯†

ç„¶åæœ‰ä¸€å¤©ä»–è¯´ä¸€å¥è¯ï¼š
"ç®—äº†ï¼Œæˆ‘ä»¥åå°±ç”¨JSSæ‹å§ã€‚"

è¿™ä¸æ˜¯é”€å”®è½¬åŒ–ï¼Œè¿™æ˜¯è¡Œä¸ºè½¬åŒ–
```

---

### æˆ˜ç•¥æ„ä¹‰

**CPOæ€»ç»“ï¼š**

> JSS isn't just for managing job sites. It's for getting your past back under control.

**ä¸­æ–‡æ›´ç‹ çš„ç‰ˆæœ¬ï¼š**

> "å…ˆæŠŠä½ çš„äººç”Ÿç›¸å†Œæ•‘å›æ¥ï¼Œå†è°ˆä»€ä¹ˆé¡¹ç›®ç®¡ç†ã€‚"

---

## ğŸ’¬ CPOæœ€åçš„è¯

### ç»™CEOçš„æ€»ç»“

**ä½ ä»¬ç°åœ¨è¿™æ¡è·¯ï¼Œæ˜¯ï¼š**
> æŠŠLedgerSnapçš„"è´¦åŠ¡ä¸¥è°¨"ï¼Œç”¨åœ¨äº†"ç›¸æœºè¿™ç§æœ€å®¹æ˜“å‡ºäº‹æ•…çš„ä¸œè¥¿ä¸Š"ã€‚è¿™æ˜¯å¯¹çš„ï¼Œè€Œä¸”å¾ˆç‹ ã€‚

---

### ç»™CTOçš„å…³é”®æé†’

**è¿™å¥—ç³»ç»Ÿå·²ç»å½¢æˆä¸€ä¸ªéå¸¸å®Œæ•´çš„"äººç±»çº§"ç³»ç»Ÿï¼š**

```
æ²¡æœ‰AI
æ²¡æœ‰çŒœæµ‹
æ²¡æœ‰è‡ªåŠ¨å½’æ¡£

ä½†ä½ å·²ç»æŠŠä¸€ä¸ªç°å®ä¸­æœ€éš¾æ•´ç†çš„åœºæ™¯
ï¼ˆåŒæ¥¼å¤šæˆ· + ä¸²é—¨ï¼‰
å‹ç¼©æˆäº†"Fix â†’ ç‚¹ä¸€æ¬¡ â†’ Done"

è¿™æ­£æ˜¯contractorä¼šè§‰å¾—"è¿™ç©æ„æ‡‚æˆ‘"çš„åœ°æ–¹
```

---

### ç»™å›¢é˜Ÿçš„äº§å“å“²å­¦

**Self-Rescue Modeçš„ç›®æ ‡ï¼š**

```
ä¸æ˜¯"æ•´ç†å¾—å¤šå¿«"
è€Œæ˜¯"è®©äººç¬¬ä¸€æ¬¡æ„Ÿè§‰ï¼šç§©åºæ˜¯æˆ‘è‡ªå·±å»ºç«‹çš„"

è¿™æ˜¯å¯¹"ç¾¤ä¼—è·¯çº¿"çš„æè‡´è´¯å½»ï¼š
ä¸è¦è¯•å›¾æ”¹å˜å¸ˆå‚…çš„è¡Œä¸ºï¼ˆè®©ä»–ä»¬å»å¡«è¡¨ï¼‰
è€Œæ˜¯è¦ç”¨æŠ€æœ¯å»é€‚åº”ä»–ä»¬çš„è¡Œä¸º
```

---

### ä¸€å¥è¯éªŒæ”¶æ ‡å‡†

```
åŒæ¥¼ä¸‰æˆ·contractorèƒ½åœ¨å‘¨å…­æ™šä¸Š
ç”¨JSSæ•´ç†å®Œè¿‡å»3å¹´çš„ç…§ç‰‡
å‘¨æ—¥å¼€å§‹ä¸»åŠ¨ç”¨JSSæ‹æ–°é¡¹ç›®

è¿™å°±æ˜¯æˆåŠŸ
```

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0  
**åˆ›å»ºäººï¼š** CPO  
**å®¡æ ¸äººï¼š** CEO  
**æ‰§è¡Œäººï¼š** CTO + å‰åç«¯å›¢é˜Ÿ  
**ç”Ÿæ•ˆæ—¥æœŸï¼š** 2026-02-07  
**é¢„è®¡å®Œæˆï¼š** Phase 1 - 3-4å‘¨

---

å…ˆæŠŠä½ çš„äººç”Ÿç›¸å†Œæ•‘å›æ¥ï¼Œå†è°ˆä»€ä¹ˆé¡¹ç›®ç®¡ç†ï¼ğŸ¯
