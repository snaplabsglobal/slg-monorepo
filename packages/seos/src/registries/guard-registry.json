{
  "schema": "seos.guard-registry.v1",
  "generated_at": "2026-02-15T06:30:00.000Z",
  "guards": [
    {
      "guard_id": "GUARD-001-A",
      "incident_id": "INC-001",
      "category": "UI",
      "root_cause_tag": "tailwind_content_missing",
      "type": "BLOCKER",
      "layer": "BUILD",
      "description": "构建时检查tailwind content路径完整性",
      "detection_logic": "tailwind.config.ts中content必须覆盖app/**、components/**、packages/snap-auth/**",
      "failure_action": "build_fail",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-001-B",
      "incident_id": "INC-001",
      "category": "UI",
      "root_cause_tag": "tailwind_content_missing",
      "type": "VALIDATION",
      "layer": "CI",
      "description": "防止tailwind配置被改坏",
      "detection_logic": "静态检查tailwind.config.ts，content数组必须包含required patterns",
      "failure_action": "pr_blocked",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-001-C",
      "incident_id": "INC-001",
      "category": "UI",
      "root_cause_tag": "tailwind_content_missing",
      "type": "ASSERTION",
      "layer": "CI",
      "description": "E2E断言Sign In button可见",
      "detection_logic": "Playwright打开/login，断言Sign In button可见",
      "failure_action": "gate0_b_fail",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-002-A",
      "incident_id": "INC-002",
      "category": "UPLOAD",
      "root_cause_tag": "upload_provider_misconfigured",
      "type": "ASSERTION",
      "layer": "RUNTIME",
      "description": "页面3秒内告诉你上传链路状态",
      "detection_logic": "upload_provider未定义或关键env缺失时fail，禁止silent fallback",
      "failure_action": "proof_pack_degraded",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-002-B",
      "incident_id": "INC-002",
      "category": "UPLOAD",
      "root_cause_tag": "upload_provider_misconfigured",
      "type": "VALIDATION",
      "layer": "CI",
      "description": "PR搞坏env/配置时CI直接失败",
      "detection_logic": "diagnose校验env完整性，upload相关key必须存在",
      "failure_action": "gate0_a_fail",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-002-C",
      "incident_id": "INC-002",
      "category": "UPLOAD",
      "root_cause_tag": "upload_provider_misconfigured",
      "type": "BLOCKER",
      "layer": "BUILD",
      "description": "启动时阻断，不等用户拍照后才503",
      "detection_logic": "启动时读取UPLOAD_PROVIDER，根据provider强制需要的env keys",
      "failure_action": "startup_fail",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-003-A",
      "incident_id": "INC-003",
      "category": "AUTH",
      "root_cause_tag": "auth_redirect_base_mismatch",
      "type": "ASSERTION",
      "layer": "RUNTIME",
      "description": "页面3秒内看懂auth模式",
      "detection_logic": "Runtime Truth必须展示AUTH_BASE_URL/AUTH_CALLBACK_URL/COOKIE_DOMAIN",
      "failure_action": "proof_pack_degraded",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-003-B",
      "incident_id": "INC-003",
      "category": "AUTH",
      "root_cause_tag": "auth_redirect_base_mismatch",
      "type": "VALIDATION",
      "layer": "CI",
      "description": "任何PR改坏auth配置则CI阻断",
      "detection_logic": "diagnose增加auth检查：callback/base必须存在",
      "failure_action": "gate0_a_fail",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-003-C",
      "incident_id": "INC-003",
      "category": "AUTH",
      "root_cause_tag": "auth_redirect_base_mismatch",
      "type": "BLOCKER",
      "layer": "CI",
      "description": "E2E自动化断言登录核心路径",
      "detection_logic": "Playwright打开/login→Sign In→完成mock auth→断言进入/jobs",
      "failure_action": "gate0_b_fail",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-004-A",
      "incident_id": "INC-004",
      "category": "MOCK",
      "root_cause_tag": "mock_route_not_registered",
      "type": "ASSERTION",
      "layer": "RUNTIME",
      "description": "Runtime Truth必须明确mock状态",
      "detection_logic": "显示mock_enabled + mock_routes_registered",
      "failure_action": "proof_pack_degraded",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-004-B",
      "incident_id": "INC-004",
      "category": "MOCK",
      "root_cause_tag": "mock_route_not_registered",
      "type": "VALIDATION",
      "layer": "CI",
      "description": "CI中验证mock状态一致性",
      "detection_logic": "若MOCK_ENABLED=true则mock endpoint必须200，禁止404",
      "failure_action": "gate0_fail",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-004-C",
      "incident_id": "INC-004",
      "category": "MOCK",
      "root_cause_tag": "mock_route_not_registered",
      "type": "BLOCKER",
      "layer": "CI",
      "description": "静态检查middleware不会拦截mock路由",
      "detection_logic": "检查middleware.ts mock路由必须在exclusion列表",
      "failure_action": "gate_fail",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-005-A",
      "incident_id": "INC-005",
      "category": "MIDDLEWARE",
      "root_cause_tag": "vercel_domain_not_assigned",
      "type": "MONITOR",
      "layer": "INFRA",
      "description": "10分钟一次自动探测所有域名",
      "detection_logic": "对Domain Registry中所有域名请求/api/proof-pack，必须HTTP 200 + JSON valid",
      "failure_action": "domain_integrity_degraded",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-005-B",
      "incident_id": "INC-005",
      "category": "MIDDLEWARE",
      "root_cause_tag": "vercel_domain_not_assigned",
      "type": "VALIDATION",
      "layer": "CI",
      "description": "每次部署后立刻验证所有production domains",
      "detection_logic": "Probe所有域名，任何一个失败则deploy标记DEGRADED",
      "failure_action": "deploy_degraded",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-005-C",
      "incident_id": "INC-005",
      "category": "MIDDLEWARE",
      "root_cause_tag": "vercel_domain_not_assigned",
      "type": "BLOCKER",
      "layer": "INFRA",
      "description": "Domain绑定问题必须走INFRA_DEPENDENCY事件+Runbook",
      "detection_logic": "CTO请求token计入INFRA_REQUEST预算",
      "failure_action": "autonomy_degraded",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-006-A",
      "incident_id": "INC-006",
      "category": "DOMAIN",
      "root_cause_tag": "domain_registry_missing",
      "type": "BLOCKER",
      "layer": "CI",
      "description": "Control Tower不允许硬编码域名",
      "detection_logic": "静态扫描dashboard文件，禁止直接写URL，必须从domain-registry读取",
      "failure_action": "ci_fail",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-006-B",
      "incident_id": "INC-006",
      "category": "DOMAIN",
      "root_cause_tag": "domain_registry_missing",
      "type": "ASSERTION",
      "layer": "RUNTIME",
      "description": "Dashboard必须显示域名来源",
      "detection_logic": "Dashboard展示App/Monitored Domain/Source",
      "failure_action": "proof_pack_degraded",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-006-C",
      "incident_id": "INC-006",
      "category": "DOMAIN",
      "root_cause_tag": "domain_registry_missing",
      "type": "VALIDATION",
      "layer": "CI",
      "description": "Domain Registry必须结构正确",
      "detection_logic": "每个app必须有且仅有1个production_primary",
      "failure_action": "ci_fail",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-RT-001",
      "incident_id": "INC-007",
      "category": "ENV",
      "root_cause_tag": "runtime_truth_missing",
      "type": "ASSERTION",
      "layer": "RUNTIME",
      "description": "Runtime Truth endpoint存在且返回完整信息",
      "detection_logic": "/api/runtime必须返回app/git_sha/env/storage/auth信息",
      "failure_action": "proof_pack_degraded",
      "soak_required": true,
      "soak_status": "PASS",
      "last_triggered": "2026-02-15T06:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-DEPLOY-001",
      "incident_id": "INC-008",
      "category": "DEPLOY",
      "root_cause_tag": "bypass_deploy_process",
      "type": "BLOCKER",
      "layer": "CI",
      "description": "Production deploy requires main branch + Gate0 pass",
      "detection_logic": "GitHub Actions: production deploy blocked unless branch=main AND gate0=PASS",
      "failure_action": "deploy_blocked",
      "soak_required": false,
      "soak_status": "N/A",
      "last_triggered": "2026-02-15T06:45:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-DEPLOY-002",
      "incident_id": "INC-008",
      "category": "DEPLOY",
      "root_cause_tag": "bypass_deploy_process",
      "type": "VALIDATION",
      "layer": "CI",
      "description": "Dev branch deploys to preview only",
      "detection_logic": "Vercel config: dev branch -> preview environment only",
      "failure_action": "deploy_redirected",
      "soak_required": false,
      "soak_status": "N/A",
      "last_triggered": "2026-02-15T06:45:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-RADAR-001",
      "incident_id": "INC-009",
      "category": "RADAR",
      "root_cause_tag": "radar_api_failure",
      "type": "ASSERTION",
      "layer": "RUNTIME",
      "description": "Radar API must return status=healthy, never 500 or degraded",
      "detection_logic": "GET /api/seos/metrics returns 200 + status=healthy within 5s",
      "failure_action": "radar_degraded_alert",
      "soak_required": true,
      "soak_status": "PENDING",
      "last_triggered": "2026-02-15T11:00:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    },
    {
      "guard_id": "GUARD-DEPLOY-SMOKE-001",
      "incident_id": "INC-010",
      "category": "DEPLOY",
      "root_cause_tag": "deploy_smoke_guard_missing",
      "type": "BLOCKER",
      "layer": "CI",
      "description": "Deploy Smoke Guard - Verify route accessibility before CEO notification",
      "detection_logic": "scripts/jss-deploy-smoke.mjs: HTTP 200 + assert text present + no DEPLOYMENT_NOT_FOUND",
      "failure_action": "ceo_notification_blocked",
      "soak_required": false,
      "soak_status": "N/A",
      "last_triggered": "2026-02-15T12:15:00.000Z",
      "aging_status": "ACTIVE",
      "status": "ACTIVE"
    }
  ],
  "summary": {
    "total": 23,
    "by_layer": {
      "RUNTIME": 6,
      "CI": 13,
      "BUILD": 2,
      "INFRA": 2
    },
    "by_type": {
      "ASSERTION": 7,
      "VALIDATION": 7,
      "BLOCKER": 8,
      "MONITOR": 1
    },
    "active": 23,
    "stale": 0,
    "archived": 0
  }
}
